(window.webpackChunksmart_tag=window.webpackChunksmart_tag||[]).push([[695],{1871:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(9974)),r=(n(2481),i(n(5754))),o={init:function(){var e,t=bouncex.getBounceVisitCookie(),n=bouncex.getBounceCookie();if(bouncex.segments=bouncex.segments||[],null!==(e=bouncex.state)&&void 0!==e&&e.gdpr)o.clearSegments();else{var i=bouncex.calling_url.match(/wkseg(\d+)/g);if(i)bouncex.segments=i.map((function(e){return parseInt(e.replace("wkseg",""))}));else if(n.softID){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){r.default.error("could not parse visit cookie for segments")}t&&t.seg?bouncex.segments=t.seg:o.downloadSegments(n.softID),bouncex.segments=bouncex.segments.filter((function(e,t,n){return n.indexOf(e)===t}))}}},downloadSegments:function(e){var t="https://dfp.bouncex.net/pub/v2/segment/".concat(e);a.default.get({url:t,error:function(){o.clearSegments()},success:function(e){var t=e;if("string"==typeof t)try{t=JSON.parse(t)}catch(e){r.default.error("segments service response was invalid JSON"),t=[]}bouncex.updateBounceVisitCookie({seg:t}),bouncex.segments=t}})},clearSegments:function(){bouncex.updateBounceVisitCookie({seg:[]}),bouncex.segments=[]}};t.default=o},8660:(e,t,n)=>{var i=n(4836),a=n(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(8416)),o=i(n(8772)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=W(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n(3036)),c=n(5432),u=n(7392),d=n(2889),l=n(2678),p=n(9032),g=n(9436),f=i(n(5390)),v=i(n(1618)),m=i(n(1634)),h=i(n(1660)),b=i(n(8066)),y=n(2481),_=i(n(2501)),x=n(1418),w=n(4744),P=i(n(8646)),O=n(1915),I=i(n(4172)),S=n(1964),A=i(n(2261)),C=i(n(9446)),k=n(4554),j=n(1555),D=n(8309),T=i(n(5754)),R=i(n(6105)),E=i(n(8723)),q=i(n(6950)),M=n(6487),V=i(n(3723)),B=n(7352),L=n(7504),N=i(n(4675)),F=i(n(8067)),U=i(n(6070));function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(W=function(e){return e?n:t})(e)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G={init:function(){A.default.gbi2Enabled()&&(G.syncUsers(),m.default.injectIntoPage(),(0,y.hasFeatureFlag)("UID2")&&(h.default.isTokenExpired()&&h.default.refreshToken(),h.default.setExpirationCheck()),V.default.supportsContextual()&&V.default.Fetch(),N.default.setHighEntropyValues())},_activateBehavioralTriggers:function(e){A.default.activateInstruments(e)},_activateCampaign:function(e){this.log(e,"activating campaign");var t=bouncex.campaigns[e];t.prestructured=!1,t.gbi.ready=!0,t.gbi.hasActivatedOnce||((0,S.event_js_eval)(e,"activation"),t.dispatchEvent("activation.bx"),t.gbi.hasActivatedOnce=!0),t.triggerUponActivation&&A.default.triggerAd(t.triggerUponActivation,e,{},!1)},_activateCreative:function(e,t){this.log(e,"activating creative");var n=bouncex.campaigns[e],i=bouncex.creatives[t],a=/{bpcid}/g;if(n.html=i.html.replace(a,e),n.styles=i.styles.replace(a,e),!C.default.setCalloutTarget(n))return bouncex.ads.error(e,"no anchor found"),void this._failCampaign(e);A.default.placeCampaign(e),A.default.assignDomReferencesToCampaign(e),A.default.cacheCreativeForm(e,1),R.default.setProperties(e),A.default.setTransitionEffect(e),this.applySSPAttributes(e),this.applySSPStyles(e),A.default.applyCampaignStyles(e),n.supportsPrestructure&&E.default.initPrestructure(n)},applySSPAttributes:function(e){var t=bouncex.campaigns[e];t.winningBid&&t.obj1&&(t.obj1.attr("data-ssp",t.winningBid.provider),t.winningBid.isMultiPanel&&t.obj1.attr("data-multipanel",""))},applySSPStyles:function(e){var t,n=bouncex.campaigns[e];n.styles+=(0,M.getSSPStyles)(null===(t=n.winningBid)||void 0===t?void 0:t.provider)},_activatePlacement:function(e,t){var n=bouncex.website.id,i=bouncex.campaigns[e],a=t.placementId,r=i.gbi.placements[a],o=this;if(this.log(e,"activating placement #".concat(a," (").concat(r.mediaType,")")),i.winningBid=t,i.activePlacementId=a,i.activeAdUnitId=r.adUnitId,this._activateCreative(e,r.creativeId),bouncex.recirc.populateCreative(e),"display"==r.mediaType){var c=-1!==s.default.PRELOAD_PROVIDERS.indexOf(t.provider),u=s.default.PRELOAD_ENABLED,d=s.default.PRERENDER_ENABLED,l=(0,w.shouldPreventPreload)(i,n),p={};i.onImpression=function(n){o._populateDisplayAd(e,X({trigger:i.trigger,content:t.adHtml,width:r.width,height:r.height,deployment:r.deployment,onReady:n,mode:"default"},p))},this._activateCampaign(e),(0,x.preconnect)(t.adHtml),c&&d&&!i.dynamic_anchor&&!l?setTimeout(this._populateDisplayAd.bind(this),0,e,X(X({content:t.adHtml,width:r.width,height:r.height,deployment:r.deployment},p),{},{mode:"prerenderOnly"})):c&&u&&!l&&setTimeout(i.preloadDisplayAd.bind(i,t.adHtml),0)}else if("video"==r.mediaType){var g={vast:t.vastData,width:r.width,height:r.height},f=i.obj1.find('video[id*="bx-video-player"]');f&&f.length>0?(i.gbi.isVideo=!0,bouncex.video.init(e,g.vast,t.provider,r)):this._prepareVideo(e,g,(function(){o._activateCampaign(e)})),(0,x.preconnect)(t.vastData)}},_adjustPosition:function(e){var t=this._getDeploymentType(e),n=bouncex.campaigns[e];if("masthead"===t&&!n.preventAdjustPosition){var i=this._getScrollPosition(n);bouncex.window.scrollTop(i)}"masthead"===t&&n.preventAdjustPosition&&T.default.debug({group:"Ads",campaignId:e,message:"Adjust position on impression prevented by bouncex.preventAdjustPositionOnImpression"})},_getScrollPosition:function(e){var t=e.obj1[0].getBoundingClientRect(),n=this._getStickySiblingDimensions(e.obj1[0]);return!!n&&n.top<t.height?Math.max(t.top-n.height,0):t.top},_getStickySiblingDimensions:function(e){return e.previousElementSibling&&"sticky"===(0,y.getCssAttribute)(e.previousElementSibling,"position")?e.previousElementSibling.getBoundingClientRect():e.nextElementSibling&&"sticky"===(0,y.getCssAttribute)(e.nextElementSibling,"position")?e.nextElementSibling.getBoundingClientRect():void 0},_allRequestsAreComplete:function(e){var t=bouncex.campaigns[e].gbi.requests;if(!t)return!1;for(var n=0;n<t.length;n++)if(!t[n].endTime)return!1;return!0},_attachClickReporting:function(e,t){bouncex.on(t,"mouseenter.gbi_click_events_"+e,(function(){bouncex.on(bouncex.window,"blur.gbi_click_events_"+e,(function(){bouncex.report(e,"click",{value:"ad"})}))})),bouncex.events[e].gbi_click=function(){bouncex.off(bouncex.window,"blur.gbi_click_events_"+e)},bouncex.on(t,"mouseleave.gbi_click_events_"+e,bouncex.events[e].gbi_click)},_compose:function(){var e=Array.prototype.slice.call(arguments),t={};return e.forEach((function(e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})),t},_constants:{auctionDelayInMilliseconds:2e3,defaultReloadDelayInMilliseconds:3e5,bidEvents:{fill:"bid_fill",none:"bid_none",empty:"bid_empty",error:"bid_error",cancelled:"bid_cancel",selected:"bid_selected"},targetSelector:".bx-group-placeholder:eq(0)",mobileFullWidthMinRatio:.85},auctionHandler:null,_createAndSendAuction:function(){if(null===this.auctionHandler){var e={auctionCheckpoint:this._constants.auctionDelayInMilliseconds,auctionTimeout:2*this._constants.auctionDelayInMilliseconds};this.auctionHandler=new f.default(e)}return this.auctionHandler.getOrCreateAuction()},_createAndSendRequests:function(e,t){var n=this;this.log(e,"sending bid requests");var i=[],a=function(a){if(t.hasOwnProperty(a)){var r=t[a];r.providers.forEach(function(t){var n=this._createBidRequest(t,{campaignId:e,placementId:a,adUnitId:r.adUnitId,type:r.mediaType,width:r.width,height:r.height,deployment:r.deployment});i.push(n),n.init()}.bind(n))}};for(var r in t)a(r);return i},_createBid:function(e){return{provider:e.provider,campaignId:e.campaignId,placementId:e.placementId,adUnitId:e.adUnitId,price:e.price,adHtml:e.adHtml,vastData:e.vastData,dealId:e.dealId,dealName:e.dealName,arrivalTime:e.arrivalTime||Date.now(),targeting:e.targeting}},_createBidRequest:function(e,t){return this._requestIndex[e](t)},_createDisplayFrame:function(e){return A.default.createIframe({target:"_blank",class:"bx-gbi-frame",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no",width:"100%",height:"100%",vspace:"0",hspace:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowTransparency:"true",srcdoc:e})},_customizations:{anchor:{updateDynamicAnchor:function(e){var t=bouncex.campaigns[e];if(t.dynamic_anchor&&!t.gbi.contentLoaded){var n=(0,k.parseSiteElementSelector)(t.callout_t),i=this._getBidDimensions(t);t.visibleAnchors=P.default.viewport.getVisibleElements(n,{domPlacementMethod:t.dom_placement_method,height:i.height,width:i.width,voffset:t.callout_voffset,visibilityThreshold:t.visibilityThreshold}),t.visibleAnchors.length>0&&(C.default.setCampaignCalloutTargetToIndex(t,t.visibleAnchors[0].index),A.default.placeCampaign(e))}},passesViewabilityTest:function(e){var t=bouncex.campaigns[e],n=this._getMinimumHeight(t)||250;return P.default.viewport.distanceToBottom(t.calloutTarget[0],t.dom_placement_method,t.callout_voffset)>n},_getMinimumHeight:function(e){var t=this._getBidDimensions(e);return("prepend"===e.dom_placement_method||"append"===e.dom_placement_method?e.calloutTarget.innerWidth():e.calloutTarget.parent().innerWidth())*(t.height/t.width)/2},_getBidDimensions:function(e){var t=e.winningBid?e.winningBid.placementId:Object.keys(e.gbi.placements)[0],n=e.gbi.placements[t];return{height:Number(n.height),width:Number(n.width)}}}},_deactivateCampaign:function(e,t){this.log(e,"deactivating campaign");var n=bouncex.campaigns[e];return A.default.deactivate_campaign(n,t)},_restartCampaign:function(e){var t=this.initCampaign.bind(this,e);this._deactivateCampaign(e,t)},_endAllRequests:function(e){var t=bouncex.campaigns[e];t&&t.gbi&&t.gbi.requests&&bouncex.campaigns[e].gbi.requests.forEach((function(e){(!e.campaigns||Object.keys(e.campaigns).length<=1)&&e.end()}))},_exceedsFrequencyCap:function(){var e=bouncex.website.adsConfig;if(!e)return!1;if(!e.freqCapEnabled)return!1;if(!e.freqCapImpressions)return!1;switch(e.freqCapInterval){case"pageview":return this._pageImpressions>=e.freqCapImpressions;case"visit":return bouncex.visit_cookie.pci>=e.freqCapImpressions}return!1},_failCampaign:function(e){var t=bouncex.campaigns[e];if(t.failed)return!1;bouncex.close_ad(e,!0),this.log(e,"campaign failed");var n=this._getDeploymentType(e);return this._failedDeployments.push(n),t.failed=!0,t.gbi.ready=!1,!1},_failedDeployments:[],_getAdUnitIds:function(e){var t=bouncex.campaigns[e],n=t.gbi&&t.gbi.placements;return Object.keys(n).map((function(e){return n[e].adUnitId}))},_getDeploymentType:function(e){var t=bouncex.campaigns[e],n=t.gbi&&t.gbi.placements;if(n)for(var i in n)if(n.hasOwnProperty(i))return n[i].deployment;return""},_getProviderConfig:function(e,t){var n=bouncex.website.sspConfig;return n&&n[e]&&n[e][t]},_getReportablePrice:function(e){return Number(e).toFixed(5)},_getResizeData:function(e,t){t.width=Number(t.width),t.height=Number(t.height);var n=bouncex.campaigns[e],i=n.obj1,a=1,r=2*((parseInt(i.find(".bx-wrap").css("padding-left"),10)||0)+(parseInt(i.find(".bx-align").css("padding-left"),10)||0)),o=bouncex.wndsize(),s=0;if("agilityzone"===n.type&&n.calloutTarget.length){var c=n.calloutTarget.width()||n.calloutTarget.parents(":visible").width();if(["before","after"].includes(n.dom_placement_method)&&(c=n.calloutTarget.parents(":visible").width()),a=((c=c>0?Math.min(c,o.width):o.width)-r)/t.width,bouncex.state.mobile&&0===i.find(".no-mobile-full-width").length)(c-r)/o.width>this._constants.mobileFullWidthMinRatio&&(s=(c-o.width)/2,a=((c=o.width)-r)/t.width)}else if("overlay"===n.type){var u=(o.width-r)/t.width,d=(o.height-r)/t.height;a=u>d?d:u}return{scaleRatio:a,scaledWidth:t.width*a,scaledHeight:t.height*a,scaledMargin:s}},_incrementImpressionCounters:function(){"number"==typeof this._pageImpressions?this._pageImpressions++:this._pageImpressions=1,bouncex.updateBounceVisitCookie((function(e){"number"==typeof e.pci?e.pci++:e.pci=1}))},_initAuction:function(e){var t=bouncex.campaigns[e];if(t&&t.isReadyForAuction()){this.log(e,"initializing auction");var n=t.gbi.bids,i=q.default.getDefaultAdsFilters();if(0==n.length){var a;if(!(0,y.hasFeatureFlag)("USE_ADS_GPS_AUCTION")||null==t||null===(a=t.gps)||void 0===a||!a.winningBid)return this.log(e,"no bids were returned"),this._failCampaign(e);this.log(e,"no ORTB bids were returned, using winning GPS bid as fallback."),t.gbi.bids.push(t.gps.winningBid)}var r=t.updateWinningBids(i);if(this._reportWinningBids(e,r),!C.default.setCalloutTarget(t))return this.error(e,"no anchor found"),this._failCampaign(e);var o=t.adformats.video||t.adformats.all;o&&o.winningBid&&this._activatePlacement(e,o.winningBid);var s=this,c=bouncex.ads._getProviderConfig(o.winningBid.provider,"reload")||this._constants.defaultReloadDelayInMilliseconds;(0,O.setTimeoutWrapper)((function(){t.isReadyForAuction(!0)&&s._restartCampaign(e)}),c)}else T.default.debug({group:"Ads",message:"_initAuction: Auction already initialized or failed",campaignId:e,metadata:{campaignId:e,campaign:t}})},_initRequests:function(e,t){var n=bouncex.campaigns[e],i=n.gbi.placements;n.gbi.hasBegunAuction=!0,n.gbi.bids=[];var a=decodeURIComponent(bouncex.calling_url);if(n.qbxtest&&-1!==a.indexOf("bxssp="))for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];o.providers=o.providers.filter((function(e){return-1!==a.indexOf("bxssp=".concat(e))}))}this._isForceTest(e)&&!t?this._prefetchBids(e,"aqbx",i):(n.gbi.auction=this._createAndSendAuction(),this._setAuctionTimeout(e))},_getSegmentInjectionHTML:function(){var e="";return bouncex.calling_url.indexOf("perfadssample")>-1?e="sample-feed":bouncex.cookie&&bouncex.cookie.softID&&(e=bouncex.cookie.softID),e?'\n      <script type="text/javascript">\n        window.wkndSegment = {\n          audienceID: '.concat(JSON.stringify(e),",\n          segments: ").concat(JSON.stringify(bouncex.segments||[]),"\n        };\n      <\/script>\n    "):""},_integrations:{tag:{intermediaryId:"869cff86d1c453c1",generateId:function(){return this.intermediaryId+":"+bouncex.website.id}},jwplayer:{key:"o8z/iG2QyTbuWcdH2vCzMM0waC0nOAeJ9/gVcpFiPZ+tv1+5",createPlayerConfig:function(e){var t=/^[\s]*<VAST/i.test(e.vastData)?"vastxml":"tag",n={};return n.file="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/blank.mp4",n.mute=!0,n.width=e.width,n.height=e.height,n.advertising={},n.advertising.client="vast",n.advertising.vpaidcontrols=!0,n.advertising[t]=e.vastData,n},createPlayerInstance:function(e,t,n,i){bouncex.ads.log(e,"creating video player instance");var a="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/8.3.0/jwplayer.js",r=this._getSegmentInjectionHTML(),o="<html><head>".concat(r,'</head><body style="margin: 0px; overflow: hidden;"><div id="bx-video"></div></body></html>'),s=A.default.createIframe({class:"bx-gbi-frame",style:"border: 0; width: "+t.width()+"px; height: "+t.height()+"px;"}),c=this;t.append(s);var u=s.contentWindow;bouncex.browser.firefox&&(u.oldGetComputedStyle=u.getComputedStyle,u.getComputedStyle=function(e,t){var n=u.oldGetComputedStyle(e,t);return null===n?{}:n}),u.document.write(o);var d=u.document.createElement("script");d.setAttribute("src",a),d.onload=function(){bouncex.ads.log(e,"jwplayer script loaded"),u.jwplayer?(bouncex.ads.log(e,"jwplayer executed"),u.jwplayer.key=c.key,u.player=u.jwplayer("bx-video"),u.player.setup(n),u.player.on("adClick",(function(){bouncex.ads.report(e,"click",{value:"ad"})})),u.player.on("adError",(function(t){bouncex.ads.error(e,t.message?"video error: "+t.message:"video error")})),i(u.player)):(bouncex.ads.error(e,"jwplayer failed to execute"),bouncex.ads._failCampaign(e))},d.onerror=function(){bouncex.ads.error(e,"jwplayer script failed to load"),bouncex.ads._failCampaign(e)},u.document.body.appendChild(d)}}},_isForceTestLiveConditions:function(e){var t="abxtest".concat(e),n="abxtestall";return bouncex.updateBounceCookie((function(e){e.hcs_abxtest=e.hcs_abxtest||[],bouncex.calling_url.indexOf(t)>-1&&-1===e.hcs_abxtest.indexOf(t)&&e.hcs_abxtest.push(t),bouncex.calling_url.indexOf(n)>-1&&-1===e.hcs_abxtest.indexOf(n)&&e.hcs_abxtest.push(n)})),bouncex.cookie.hcs_abxtest.indexOf(t)>-1||bouncex.cookie.hcs_abxtest.indexOf(n)>-1},_isForceTest:function(e){return bouncex.calling_url.indexOf("aqbxtest"+e)>-1||this._isForceTestLiveConditions(e)},resizeAd:function(e,t){var n=bouncex.campaigns[e],i=n.obj1||jQuery("#".concat(n.domElementID)),a=i.find(bouncex.ads._constants.targetSelector);a||(a=jQuery("#bx-video-player-".concat(e)).closest(".bx-group"));var r=bouncex.ads._getResizeData(e,{width:t.width,height:t.height});return r.scaleRatio>=1?1:(a&&a.css({width:r.scaledWidth+"px",height:r.scaledHeight+"px",overflow:"hidden"}),i&&i.css({width:r.scaledWidth+"px",marginLeft:"".concat(r.scaledMargin,"px"),marginRight:"".concat(r.scaledMargin,"px")}),r.scaleRatio)},_populateDisplayAd:function(e,t){this.log(e,"populating display ad: ".concat(t.mode||"pop"));var n=bouncex.campaigns[e],i=n.obj1.find(bouncex.ads._constants.targetSelector),a=(0,B.ReplaceMacros)(t.content,n),r=t.onReady,o=t.mode,s="prerenderOnly"===o,c="loadAdOnShow"===o,u=t.undoRgx||(0,x.getLoadOnPopRgx)(e),d=t.interceptRgx||(0,x.getLoadOnShowRgx)(e),l="transform-origin: 0 0; max-width: 100%; max-width: 100vw; max-height: 100%; max-height: 100vh;";if(0===i.length)return bouncex.ads.error(e,"creative is missing an ad stack placeholder group"),bouncex.ads._failCampaign(e),!1;var p=n.isPrerendered(a);if(p&&s)return!0;if(p){n.frameWatcher.impressionStart();var g=n.frameWatcher.frameElement.contentDocument;return x.adjustPreloadContent.undo(g,u),n.frameWatcher.unwrapInterceptor(u),r&&!n.frameWatcher.loadComplete?n.frameWatcher.addEventListener("loadComplete.bx",r,!1):r&&setTimeout(r,0),!0}n.clearContainer(),a=(0,x.adjustPreloadContent)(a,d,e);var f=bouncex.ads.resizeAd(e,t);f&&f<1&&(l+=" transform: scale(".concat(f,");"));var v="window.parent.bouncex.campaigns[".concat(e,"].frameWatcher.interceptElements(").concat(d.toString(),");"),m="<script>\n      ".concat("var inDapIF = true;","\n      ").concat(v,"\n      ").concat(w.writeAsyncPatch,"\n    <\/script>");m+=this._getSegmentInjectionHTML();var h=getComputedStyle(i[0])["font-family"];l+="revcontent"===n.winningBid.provider?"font-family: ".concat(h):"";var _={"debug:ads:deal_id":n.winningBid.dealId,"debug:ads:deal_name":n.winningBid.dealName,"debug:ads:campaign_id":n.winningBid.campaignId,"debug:ads:ad_unit_id":n.winningBid.adUnitId,"debug:ads:provider":n.winningBid.provider,campaignid:n.winningBid.campaignId},P="";(0,y.hasFeatureFlag)("ADS_CSP_ON_IFRAME")&&(P="\n        <meta http-equiv=\"Content-Security-Policy\" content=\"upgrade-insecure-requests; default-src https: data: blob: 'self' 'unsafe-inline' 'unsafe-hashes' 'unsafe-eval'; object-src 'none'\">\n      "),a='<html>\n  <head>\n    <base target="_blank"/>\n    '.concat(P,"\n    <script>\n      window.parent.bouncex.integrations.csp.initErrorDetection(document, true, ").concat(JSON.stringify(_),", 10)\n    <\/script>\n    ").concat(m,'\n  </head>\n  <body marginwidth="0" marginheight="0" style="').concat(l,'">').concat(a,"</body>\n</html>");try{var O=this._createDisplayFrame(a),I=this.watchCreativesLoad(e,O);I.sourceContent=t.content,I.loadedContent=a,n.once("impression.bx",(function(){if(n.frameWatcher===I){c&&i.append(O);var e=n.frameWatcher.frameElement.contentDocument;I.unwrapInterceptor(),x.adjustPreloadContent.undo(e);var a=b.default.display.getScriptTag({trigger:n.trigger,placement:t.deployment,ssp:n.winningBid.provider,websiteId:bouncex.website.id,adUnitId:n.winningBid.adUnitId,adsPath:"#".concat(n.getContainer().id)});a&&(0,y.createElement)("script",{src:a},document.head)}}),!1),c||(0,L.displayAd)(n,O,i)}catch(t){return bouncex.ads.error(e,"error populating ad: "+t),bouncex.ads._failCampaign(e),!1}this._attachClickReporting(e,i);var S=O.contentDocument;(0,D.loadImages)(jQuery(S).find("img").filter(":visible"),(function(){bouncex.ads.log(e,"images loaded successfully"),r&&r()})),n.removePreloader()},watchCreativesLoad:function(e,t){var n=bouncex.campaigns[e];if(n.frameWatcher&&n.frameWatcher.frameElement===t)return n.frameWatcher;n.frameWatcher=new o.default(t),n.frameWatcher.campaignId=e;var i=this._reportCreativesLoaded.bind(this,n.frameWatcher);n.frameWatcher.addEventListener("loadComplete.bx",i,!1);var a=this._reportAdIntervention.bind(this,e,"browser");return n.frameWatcher.addEventListener("adIntervention.bx",a,!1),n.frameWatcher},watchVideoLoad:function(e){var t=document.getElementById("bx-video-player-"+e);this.watchCreativesLoad(e,t)},_reportCreativesLoaded:function(e){var t=e.campaignId,n=t&&bouncex.campaigns[t];n&&e.loadComplete&&!e.reportData&&(e.reportData={loaded:1*e.loadSucceeded,failed:1*e.loadFailed,load_delay:e.loadDelay},this.report(t,"creatives_loaded",e.reportData),bouncex.clientEvents.activateCreativeLoadedEvent({id:n.id,purpose:n.purpose,sub_purpose:n.sub_purpose}),e.loadFailed&&this.error(t,"creatives failed to load"))},_reportAdIntervention:function(e,t){var n=e&&bouncex.campaigns[e];if(n&&!n.ad_closed){this._failCampaign(e),this.error(e,"Ad Intervened: ".concat(t));var i={reason:t};this.report(e,"ad_intervention",i)}},_prefetchBids:function(e,t,n){this.log(e,"prefetching "+t);var i=bouncex.campaigns[e],a={};for(var r in n)n.hasOwnProperty(r)&&(a[r]=this._compose(n[r]),a[r].providers=[t]);i.gbi.requests=this._createAndSendRequests(e,a),(0,O.setTimeoutWrapper)(function(){this._endAllRequests(e),i.gbi.bids.length>0?this._initAuction(e):this._initRequests(e,!0)}.bind(this),1e3)},_prepareVideo:function(e,t,n){this.log(e,"preparing video ad");var i=bouncex.campaigns[e],a=i.obj1.find(bouncex.ads._constants.targetSelector),r=bouncex.ads._integrations.jwplayer,o=a.width(),s=a.height(),c=bouncex.ads._getResizeData(e,{width:o,height:s});c.scaleRatio<1&&(o=c.scaledWidth,s=c.scaledHeight,a.css({width:o+"px",height:s+"px"}),i.obj1.css({width:o+"px",marginLeft:"".concat(c.scaledMargin,"px"),marginRight:"".concat(c.scaledMargin,"px")}));var u=r.createPlayerConfig({vastData:t.vast,width:o,height:s});r.createPlayerInstance(e,a,u,(function(e){i.gbi.player=e,i.gbi.isVideo=!0,i.gbi.config=i.gbi.config||{},i.gbi.config.playOnImpression=!0,i.gbi.contentLoaded=!0,n()}))},_userSyncRequests:{__isSynced:function(e){return!!sessionStorage.getItem("bx".concat(e,"synced"))},__setAsSynced:function(e){bouncex.ads.log("SYNC","".concat(e," was synced")),sessionStorage.setItem("bx".concat(e,"synced"),"1")},__insertSyncElement:function(e,t,n){var i=(0,y.createElement)(t,{style:"display: none;",width:"1",height:"1",src:n}),a=this;i.onload=function(){a.__setAsSynced(e)},(0,y.hasFeatureFlag)("USER_SYNC_PIXEL_DEFER")?"complete"===document.readyState?document.body.appendChild(i):window.addEventListener("load",(function(){document.body.appendChild(i)})):document.body.appendChild(i)},pbm:function(){if(!this.__isSynced("pbm")){var e=bouncex.ads._getProviderConfig("pbm","user_sync_endpoint"),t=bouncex.ads._getProviderConfig("pbm","publisher_id");e?t?this.__insertSyncElement("pbm","iframe","//"+e+"?p="+t):bouncex.ads.error(this.campaignId,"no publisher id found for pubmatic user sync"):bouncex.ads.error(this.campaignId,"no endpoint found for pubmatic user sync")}},index:function(){if(!this.__isSynced("index")){this.__insertSyncElement("index","iframe","https://js-sec.indexww.com/um/ixmatch.html")}},acuity:function(){if(!this.__isSynced("acuity")){var e="".concat(bouncex.website.id,"-").concat(bouncex.cookie.did),t=F.default.getInstance().getValues(),n=t.usPrivacy,i=t.gdprApplies,a=t.tcString,r=i?1:0,o=null!=a?a:"",s="https://cs.admanmedia.com/ff062a454b79198e17a2ec718ec55e04.gif?puid=".concat(e,"&gdpr=").concat(r,"&gdpr_consent=").concat(o);n&&(s+="&ccpa=".concat(n)),this.__insertSyncElement("acuity","img",s)}},magnite:function(){if(!this.__isSynced("magnite")){this.__insertSyncElement("magnite","iframe","".concat("https://eus.rubiconproject.com/usync.html","?p=").concat(20986,"&endpoint=").concat("us-east"))}}},_requestIndex:{aqbx:function(e){return new s.SSP_Request(e,{init:function(){this.startTime=(0,y.getTimeMs)(),this.done();var e=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content,t=e&&"vast"===e.type,n=e&&e.value&&bouncex.utils&&bouncex.utils.validate.url(e.value);if(t&&n&&bouncex.calling_url.indexOf("aqbxovrd")>-1){var i=this,a={url:e.value,complete:function(e,t){i.handleResponse(e,t),i.done()},xhrFields:{withCredentials:!1}};this.fetch(a)}else this.handleResponse()},handleResponse:function(e,t){var n=this,i=bouncex.campaigns[this.campaignId],a=null;"success"===t&&e&&e.responseText&&(a=e.responseText);var r=bouncex.ads._createBid({provider:"aqbx",campaignId:n.campaignId,placementId:n.placementId,adUnitId:n.adUnitId,price:0,adHtml:n.getDisplayHtml(n.width,n.height),vastData:n.getVastXml(a),arrivalTime:n.endTime,dealId:n.getAqbxDealId(),dealName:n.getAqbxDealId()});i.gbi.bids.push(r),bouncex.ads.log(this.campaignId,"bid simulated for force testing")},getAqbxDealId:function(){var e;return null===(e=/aqbxdealid\[([\w-]+)\]/.exec(decodeURIComponent(bouncex.calling_url)))||void 0===e?void 0:e[1]},getDisplayHtml:function(e,t){var n=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content;if(n&&"html"===n.type&&bouncex.calling_url.indexOf("aqbxovrd")>-1)return n.value;var i="https://".concat(bouncex.website.biu,"/assets/global/images/pub/demo").concat(e,"x").concat(t,".gif");return'<a><img src="'.concat(i,'" width="').concat(e,'" height="').concat(t,'"/></a>')},getVastXml:function(e){var t=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content,n=t&&"vast"===t.type,i=t&&t.value&&"vastxml"===v.default.isVastOrTag(t.value);return n&&i&&bouncex.calling_url.indexOf("aqbxovrd")>-1?t.value:e||'<VAST version="2.0">\n  <Ad>\n    <InLine>\n      <AdSystem>Acudeo Compatible</AdSystem>\n      <AdTitle>VAST 2.0 AQBX</AdTitle>\n      <Description>VAST 2.0 AQBX</Description>\n      <Creatives>\n        <Creative>\n          <Linear>\n            <Duration>00:00:21</Duration>\n            <MediaFiles>\n                <MediaFile\n                    delivery="progressive"\n                    type="video/mp4"\n                    bitrate="500"\n                    width="720"\n                    height="480"\n                    scalable="true"\n                    maintainAspectRatio="true">https://'.concat(bouncex.website.biu,"/assets/global/videos/pub/demo/ads_demo_video.mp4</MediaFile>\n            </MediaFiles>\n          </Linear>\n        </Creative>\n      </Creatives>\n    </InLine>\n  </Ad>\n</VAST>")}})},index:function(e){return new c.SSP_INDEX_Request(e)},pbm:function(e){return new u.SSP_PBM_Request(e)},revcontent:function(e){return new d.SSP_RevContent_Request(e)},criteo:function(e){return new l.SSP_Criteo_Request(e)},acuity:function(e){return new p.SSP_Acuity_Request(e)},magnite:function(e){return new g.SSP_Magnite_Request(e)}},_reportWinningBids:function(e,t){var n=this,i=bouncex.campaigns[e],a=this._constants.bidEvents.selected,r=m.default.hasIDfromIdentityHub()?1:0;T.default.debug({campaignId:e,group:"Ads",message:"Winning Bids",metadata:{winningBids:t}});var o=Array.from(t).map((function(t){return n._selectWinningBid(e,t)})),s={auction_number:i.gbi.auctionCount,bids:JSON.stringify(o),has_uid:h.default.isValid()?1:0,has_uid_identity_hub:r};this.report(e,a,s)},_selectWinningBid:function(e,t){var n=bouncex.campaigns[e],i=n.gbi.placements[t.placementId];return this.log(e,"selecting ".concat(i.mediaType," bid from ").concat(t.provider)),{media_type:i.mediaType,partner:t.provider,deployment:i.deployment,deal_id:t.dealId||"NA",price:bouncex.ads._getReportablePrice(t.price),auction_number:n.gbi.auctionCount,ad_unit_id:t.adUnitId,is_gps:!!t.isGps}},_setAuctionTimeout:function(e){var t=this._constants.auctionDelayInMilliseconds,n=this;(0,O.setTimeoutWrapper)((function(){var i=bouncex.campaigns[e].gbi.bids.length>0||n._allRequestsAreComplete(e);(0,y.hasFeatureFlag)("USE_ADS_GPS_AUCTION")&&U.default.runAuction(e),i?(n.log(e,"one or more bids received, or all requests have resolved; ending wait period"),n._endAllRequests(e),n._initAuction(e)):(n.log(e,"no bids after first wait period; some requests still pending; trying again"),(0,O.setTimeoutWrapper)((function(){n.log(e,"ending wait period"),n._endAllRequests(e),n._initAuction(e)}),t))}),t)},hasSuppressedLineItem:function(){return bouncex.integrations.gam.hasSuppressedLineItem()},shouldDfpPreventShowing:function(e){return this.isDfpLoaded()?!!this.hasSuppressedLineItem()&&(this.log(e,"GAM Suppressed Lineitem on page",!0),!0):(this.log(e,"GAM not loaded",!0),!0)},canShowPubCampaign:function(e,t,n){var i=bouncex.campaigns[t];if(!this._isForceTest(t)){if(this._exceedsFrequencyCap())return!1;if(n&&this.shouldDfpPreventShowing(t))return!1}if(i.dynamic_anchor){if(this._customizations.anchor.updateDynamicAnchor(t),0===i.visibleAnchors.length)return this.log(t,"dynamic anchor - no visible anchors",!0),!1;if(!this._customizations.anchor.passesViewabilityTest(t))return this.log(t,"dynamic anchor - fails visibility test",!0),!1}if(i.trigger&&i.winningBid)return e===i.trigger||i.activationBid(e)===i.winningBid;if(i.deployment_type&&!i.deployment_type.canShow())return!1;var a=this.readyCampaignAd(e,t);return this.tryPop(t,e),!i.failed&&(i.gbi.ready?!(!i.trypopTriggered||!a)&&(this.log(t,"passes canShowPubCampaign criteria"),"floater"===i.deployment&&sessionStorage.setItem("wk-smart-header","impressed"),!0):(this.log(t,"gbi.ready is false",!0),!1))},readyCampaignAd:function(e,t){var n=bouncex.campaigns[t],i=n.activationBid(e);return!!i&&(i!==n.winningBid&&(n.obj1&&(n.obj1.add(n.obj2).remove(),delete n.video,delete n.gbi.isVideo),this._activatePlacement(t,i)),!0)},error:function(e,t){this.log(e,t,!0)},getDeploymentType:function(e){return this._getDeploymentType(e)},getFailedDeployments:function(){return this._failedDeployments},initCampaign:function(e){this.log(e,"initializing campaign");var t=bouncex.campaigns[e];if(t.adformats=t.winningBid=null,t.gbi.auctionCount?t.gbi.auctionCount++:t.gbi.auctionCount=1,this.log(e,"initCampaign run #".concat(t.gbi.auctionCount)),t.gbi.auctionCount>13&&this._failCampaign(e),C.default.isMissingTarget(t))return this.error(e,"no anchor found"),this._failCampaign(e);t.activated||(this.report(e,"eligible"),t.listeners=new I.default,(0,S.event_js_eval)(e,"preactivation"),this.log(e,"activating behavioral triggers"),this._activateBehavioralTriggers(e),t.activated=!0),this._initRequests(e)},syncUsers:function(){Object.keys(bouncex.website.sspConfig||{}).forEach((function(e){"function"==typeof G._userSyncRequests[e]&&((0,y.hasFeatureFlag)("DISABLE_USER_SYNC_".concat(e.toUpperCase()))||G._userSyncRequests[e]())}),this)},initDfp:function(){bouncex.integrations.gam.init()},isDfpLoaded:function(){return bouncex.integrations.gam.getDfpIsLoaded()},getDfpEndPageViewEvent:function(){return bouncex.integrations.gam.getDfpEndPageViewEvent()},getDfpLineItemIds:function(){return bouncex.integrations.gam.lineItems.getAll()},handleImpression:function(e){this._adjustPosition(e),this._incrementImpressionCounters()},log:function(e,t,n){var i={group:"Ads",message:t,campaignId:e};n?T.default.error(i):T.default.info(i)},report:function(e,t,n){if(0!==t.indexOf("bid_")||!bouncex.vars.block_bid_events){var i=bouncex.campaigns[e],a=(n=n||{}).partner||i.winningBid&&i.winningBid.provider;switch(a?this.log(e,"provider ".concat(a.toUpperCase(),' reporting event "').concat(t,'"')):this.log(e,'reporting event "'+t+'"'),t){case"pop":var r=i.winningBid;n.ad_unit_id=i.activeAdUnitId||0,r?(n.targeting="NA",n.partner=r.provider,n.deal_id=r.dealId,n.deal_name=r.dealName,n.price=this._getReportablePrice(r.price),n.deployment=this._getDeploymentType(e),n.auction_number=i.gbi.auctionCount,n.is_performance_ads=_.default.bidIsPerformanceAd(r),n.is_gps=!!r.isGps):this.error(e,'unable to find bid data to report on "pop"');break;case"trypop":case"eligible":n.ad_units=this._getAdUnitIds(e).join(",");break;case"click":i.winningBid&&(n.deal_id=i.winningBid.dealId,n.deal_name=i.winningBid.dealName,n.is_gps=!!i.winningBid.isGps);var o=this._getDeploymentType(e);o&&(n.deployment=o),n.value=n.value||"nonad";break;case"ad_intervention":if(i.winningBid){n=Object.assign({},i.winningBid,{adHtml:null,vastData:null},n)}}["pop","trypop","click","eligible"].includes(t)&&(n.has_uid=h.default.isValid()?1:0,n.has_uid_identity_hub=m.default.hasIDfromIdentityHub()?1:0),n.source="ads",(0,j.buildReport)(e,t,n)}},tryPop:function(e,t){var n=bouncex.campaigns[e];if(!n.trypopTriggered){if("overlay"!==this._getDeploymentType(e)&&!n.dynamic_anchor){var i=(0,k.parseSiteElementSelector)(n.callout_t);if(!(!!i&&!!jQuery(i).length))return}this.report(e,"trypop",{activation:t}),n.trypopTriggered=!0}},schainObject:function(e){var t={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:(0,M.getWunderkindSiteIDForSchain)(),hp:1}]};if(e){var n=t.nodes[0];n.rid=e,n.name=bouncex.website.name,n.domain=bouncex.website.domain}return t},schainObjectString:function(){var e=this.schainObject();return[e.ver,e.complete+"!"+e.nodes[0].asi,e.nodes[0].sid,e.nodes[0].hp].map(encodeURIComponent).join(",")}};t.default=G},5390:(e,t,n)=>{var i=n(4836),a=n(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.Auction=m,t.default=v;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n(3036)),o=n(9032),s=n(5432),c=n(7392),u=n(2889),d=n(2678),l=n(9436),p=i(n(4223));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}var f={aqbx:r.SSP_Request,index:s.SSP_INDEX_Request,pbm:c.SSP_PBM_Request,revcontent:u.SSP_RevContent_Request,criteo:d.SSP_Criteo_Request,acuity:o.SSP_Acuity_Request,magnite:l.SSP_Magnite_Request};function v(e){this.__init(e||{})}function m(e,t){this.auctionHandler=e,this.campaigns=t,this.__init()}v.impid=0,v.SSP_factory=function(e,t){var n=f[e],i=new(n&&n.__SSP_Class||r.default)(t);return i.provider=e,n&&(i.__Request_Class=n||r.SSP_Request),i},Object.assign(v.prototype,{activeAuction:null,auctions:null,auctionTimeout:null,auctionCheckpoint:null,__init:function(e){this.auctions=[],this.auctionTimeout=e.auctionTimeout||null,this.auctionCheckpoint=e.auctionCheckpoint||null},getOrCreateAuction:function(){return null===this.activeAuction||this.activeAuction.checkBidRequestsDone()?this.createAndSendNewAuction():this.activeAuction},createAndSendNewAuction:function(){var e=this.createNewAuction();return null!==e&&setTimeout(e.sendBidRequests.bind(e),100),e},createNewAuction:function(){var e=this.getAuctionableCampaigns();return Object.keys(e).length?(this.activeAuction=new m(this,e),this.auctions.push(this.activeAuction),this.activeAuction):null},getAuctionableCampaigns:function(){var e={};for(var t in bouncex.campaigns){var n=bouncex.campaigns[t];n.isGBI2&&n.isReadyForAuction(!0)&&(e[t]=n)}return e}}),Object.assign(m.prototype,{campaigns:null,providerCampaigns:null,bidRequests:null,SSPList:null,startTime:null,endTime:null,durationTime:null,__init:function(){this.SSPList={}},__initBidRequests:function(){return null!==this.campaigns&&this.__initCampaigns()&&(this.providerCampaigns=this.getProviderCampaigns(),this.bidRequests=this.createBidRequests()),this.bidRequests&&Object.keys(this.bidRequests).length>0},__initCampaigns:function(){for(var e in this.campaigns){var t=this.campaigns[e];t.isReadyForAuction()?this.__initCampaign(t):delete this.campaigns[e]}return Object.keys(this.campaigns).length>0},__initCampaign:function(e){e.gbi.hasBegunAuction=!0,e.gbi.bids=[],e.gbi.requests=[],e.adformats=null,e.winningBid=null},__initSSP:function(e,t){var n={auction:this,campaign_ids:Object.keys(t),campaign_placement_ids:t};return this.SSPList[e]=v.SSP_factory(e,n)},getProviderCampaigns:function(){var e={};for(var t in this.campaigns){var n=this.campaigns[t].getProviders();for(var i in n)(e[i]||(e[i]={}))[t]=n[i]}return e},createBidRequests:function(){var e={};for(var t in this.providerCampaigns){var n=this.providerCampaigns[t],i=this.__initSSP(t,n),a=i.createBidRequests();e[t]={ssp:i,campaign_placement_ids:n,requests:a}}return e},sendBidRequests:function(){var e=this.auctionHandler.auctionTimeout,t=this.auctionHandler.auctionCheckpoint;if(null===this.startTime){if(this.startTime=new Date,!this.__initBidRequests())return this.failed=!0,void this.__bidRequestsDone();Object.values(this.bidRequests).forEach(p.default.tryCatch((function(e){e.ssp.sendBidRequests(e.requests),e.timeSent=new Date}))),null!==e&&setTimeout(this.__timeout.bind(this),e),null!==t&&setTimeout(this.__checkpoint.bind(this),t)}},getIncompleteBidRequests:function(){return Object.values(this.bidRequests).filter((function(e){return e.timeSent&&!e.ssp.checkIfDone()}))},checkBidRequestsDone:function(){return null!==this.startTime&&(null!==this.endTime||null===this.bidRequests||0===this.getIncompleteBidRequests().length&&(this.__bidRequestsDone(),!0))},__timeout:function(){null===this.endTime&&(this.__bidRequestsDone(),this.abortFutileRequests())},__checkpoint:function(){this.updateWinningBids(),this.abortFutileRequests()},__bidRequestsDone:function(){null===this.endTime&&(this.endTime=new Date,this.durationTime=this.endTime-this.startTime,this.updateWinningBids())},updateWinningBids:function(){for(var e in this.campaigns){var t=this.campaigns[e];if(this.endTime||t.gbi.bids.length)try{this.updateCampaignWinningBids(t)}catch(e){}}},abortFutileRequests:function(){return Object.values(this.bidRequests).reduce((function(e,t){return e.concat(t.ssp.abortFutileRequests())}),[])},updateCampaignWinningBids:function(e){return bouncex.ads._initAuction(e.id),e.winningBid}}),Object.defineProperties(r.default.prototype,{auctionHandler:{writable:!0}})},6950:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(861)),r={hasDealId:function(e){var t=e.filter((function(e){return!!e.dealId}));return t.length?t:e},hasHighestPriority:function(e){var t=/p([1-9][0-9]?)/i,n=0;return e.reduce((function(e,i){var a=[i.dealName,i.dealId].join(),r=t.exec(a);if(null===r)return e;var o=Number(r[1]);return o>n?(n=o,[i]):(o===n&&e.push(i),e)}),e)},hasHighestPrice:function(e){var t=[],n=0;return e.forEach((function(e){e.price>n?(n=e.price,t=[e]):e.price==n&&t.push(e)})),t.length?t:e},deprioritizeBackfill:function(e){var t=e.filter((function(e){return!e.isBackfill}));if(t.length)return t;var n=bouncex.website.sspConfig,i=e.map((function(e){var t,i=e.provider;return null===(t=n[i])||void 0===t?void 0:t.ssp_priority})),r=Math.max.apply(Math,(0,a.default)(i)),o=e.filter((function(e){var t,i=e.provider;return(null===(t=n[i])||void 0===t?void 0:t.ssp_priority)===r}));return o.length?o:e},arrivedFirst:function(e){var t=[],n=0;return e.forEach((function(e){0===n||e.arrivalTime<n?(n=e.arrivalTime,t=[e]):e.arrivalTime==n&&t.push(e)})),t.length?t:e},getDefaultAdsFilters:function(){return[r.deprioritizeBackfill,r.hasHighestPriority,r.hasHighestPrice,r.arrivedFirst]}};t.default=r},9032:(e,t,n)=>{var i=n(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_Acuity_Request=s,t.default=o;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=o?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(a,s,c):a[s]=e[s]}a.default=e,n&&n.set(e,a);return a}(n(8897));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function o(e){a.default.call(this,e)}function s(e){a.SSP_CONSOLIDATED_Request.call(this,e)}Object.assign(o.prototype=Object.create(a.default.prototype,{constructor:Object.getOwnPropertyDescriptor(o.prototype,"constructor")}),{__Request_Class:s,provider:"acuity",openRTBVersion:"2.4",getImpressionKey:function(e){var t=e.campaignID,n=e.placement,i="video"===e.type?"video":"display",a=[t,i];return"display"===i&&a.push(n.width,n.height),a.join("|")},getRequestKey:function(e){var t=e.campaignID,n=this.auction.campaigns[t].gbi.placements[e.placementID],i=[t,n.mediaType];return"display"===n.mediaType&&i.push(n.width,n.height),i.join("|")}}),s.__SSP_Class=o,Object.assign(s.prototype=Object.create(a.SSP_CONSOLIDATED_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(s.prototype,"constructor")}),{provider:"acuity",getSiteId:function(){return""},getOptions:function(e){var t=/video/.test(this.requestKey)?"video":"banner";return{method:"POST",url:"https://ssp.wknd.ai/acuity/".concat(t),data:JSON.stringify(e),dataType:"json",contentType:"application/json",global:!1,crossDomain:!0,xhrFields:{withCredentials:!1},timeout:5e3,context:this,complete:function(e,t){this.handleResponse(e,t),this.done()}}},getRequestData:function(e){var t="".concat(bouncex.cookie.vid,"_").concat(bouncex.cookie.sid),n=this.getBaseSite();n.publisher&&(n.publisher.id=bouncex.website.id);var i={id:t,site:n,device:this.getDevice(),user:{id:"".concat(bouncex.website.id,"-").concat(bouncex.cookie.did)},imp:e,at:1,tmax:300,ext:{schain:this.schainObject(t)}};return this.appendCompliance(i),i}})},2678:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_Criteo_Request=SSP_Criteo_Request,exports.Zones=void 0,exports.default=SSP_Criteo;var _ssp=_interopRequireWildcard(__webpack_require__(3036)),_helpers=__webpack_require__(6487),_helpers2=__webpack_require__(2481),_logger=_interopRequireDefault(__webpack_require__(5754));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_getRequireWildcardCache=function(e){return e?n:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var n=_getRequireWildcardCache(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}var Zones=exports.Zones={display:{global:{"300x250":1668820,"300x600":1639940,"320x480":1639944,"480x320":1639941,"600x500":1639943,"720x480":1639939,"800x1100":1639937,"800x1200":1639942,"900x550":1639936,"900x600":1639935,"970x250":1639934,"728x90":1760190,"320x50":1760191},GB:{"300x250":1684286,"300x600":1684296,"320x480":1684287,"480x320":1684289,"600x500":1684288,"720x480":1684290,"800x1100":1684293,"800x1200":1684294,"900x550":1684295,"900x600":1684292,"970x250":1685692,"728x90":1760192,"320x50":1760193}},video:{global:{default:1699741}}};function SSP_Criteo(e){_ssp.default.call(this,e)}function SSP_Criteo_Request(e){_ssp.SSP_Request.call(this,e)}!function(){Object.assign(SSP_Criteo.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Criteo.prototype,"constructor")}),{__Request_Class:SSP_Criteo_Request,provider:"criteo",__init:function __init(){var _window,_window$Criteo,_ref,_ref$events;null!==(_window$Criteo=(_window=window).Criteo)&&void 0!==_window$Criteo||(_window.Criteo={});var isCriteoLoaded=Object.keys(window.Criteo).length>0;(0,_helpers2.hasFeatureFlag)("DISABLE_CRITEO_NAMESPACE")||!isCriteoLoaded||document.getElementById("wknd-criteo")||(window.CriteoWknd={},fetch("https://static.criteo.net/js/ld/publishertag.js").then((function(response){response.ok?response.text().then((function(criteoScript){var criteoScriptNamespaced=criteoScript.replace(/window.Criteo/g,"window.CriteoWknd"),criteoScriptNamespaced2=criteoScriptNamespaced.replace(/window.criteo_pubtag/g,"window.criteo_pubtagWknd");eval(criteoScriptNamespaced2)})):_logger.default.warn({group:"Ads",message:"Failed to fetch Criteo script."})}))),!(0,_helpers2.hasFeatureFlag)("DISABLE_CRITEO_NAMESPACE")&&isCriteoLoaded||document.getElementById("wknd-criteo")||(0,_helpers2.createElement)("script",{async:"async",type:"text/javascript",src:"https://static.criteo.net/js/ld/publishertag.js",id:"wknd-criteo"},document.head),null!==(_ref$events=(_ref=window.CriteoWknd||window.Criteo).events)&&void 0!==_ref$events||(_ref.events=[]),_ssp.default.prototype.__init.apply(this,arguments)}})}(),SSP_Criteo_Request.__SSP_Class=SSP_Criteo,Object.assign(SSP_Criteo_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Criteo_Request.prototype,"constructor")}),{provider:"criteo",init:function(){var e=this.getRequestData(),t=this.getOptions(e);return this.fetch(t)},fetch:function(e){this.startTime=Date.now();var t=this.handleResponse.bind(this);(window.CriteoWknd||window.Criteo).events.push((function(){_logger.default.debug({group:"Ads",message:"Criteo bids requested",metadata:{request:e.data}}),(window.CriteoWknd||window.Criteo).RequestBids(e.data,t,5e3)}))},handleResponse:function(e){var t=this,n=bouncex.campaigns[this.campaignId],i=bouncex.ads._constants.bidEvents,a=i.error;if(n){var r={partner:"criteo",partner_site_id:"wunderkind",deployment:this.deployment||"unknown",requested_ad_units:"display"===this.type?this.width+"x"+this.height:"video",request_timestamp:this.startTime,price:"NA",deal_id:"NA",auction_number:n.gbi.auctionCount,ad_unit_id:this.adUnitId};_logger.default.debug({group:"Ads",message:"Criteo bids retrieved",metadata:{impid:"".concat(this.placementId),bids:e}});var o=e.filter((function(e){return e.impressionId==="".concat(t.placementId)}));if(o.length){var s=this.handleSuccessfulResponse(o[0]);a=s.status,r.creative_type=(0,_helpers.getCreativeType)(s.bid.vastData,this.type)}else a=i.empty;this.reportResult(a,r)}else _logger.default.debug({group:"Ads",message:"Criteo Bid Response received for a campaign that is no longer available",metadata:{impid:"".concat(this.placementId),bids:e,campaignId:this.campaignId}})},handleSuccessfulResponse:function(e){var t=bouncex.campaigns[this.campaignId],n=bouncex.ads._constants.bidEvents,i=this.getCreativeFromBid(e),a=bouncex.ads._createBid({provider:"criteo",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:e.cpm,adHtml:null,dealId:e.dealCode,vastData:null,arrivalTime:this.endTime,isBackfill:!1});return"video"===this.type?a.vastData=i:a.adHtml=i,t.gbi.bids.push(a),{status:n.fill,bid:a}},getCreativeFromBid:function(e){return"video"===this.type?e.vastXml||e.vastUrl:window.CriteoWknd?'\n        <script type="text/javascript">\n        var w = window;\n        var doc = window.document;\n        for (i = 0; i < 10; i++) {\n          w = w.parent;\n          if (w.CriteoWknd) {\n            try {\n              w.CriteoWknd.RenderAd("'.concat(e.id,'", doc);\n              break;\n            } catch (e) {\n              continue;\n            }\n          }\n        }\n        <\/script>\n      '):'\n        <script type="text/javascript">\n        var w = window;\n        var doc = window.document;\n        for (i = 0; i < 10; i++) {\n          w = w.parent;\n          if (w.Criteo) {\n            try {\n              w.Criteo.RenderAd("'.concat(e.id,'", doc);\n              break;\n            } catch (e) {\n              continue;\n            }\n          }\n        }\n        <\/script>\n      ')},getSiteId:function(){return this._getProviderConfig("network_id")},getOptions:function(e){var t=this;return{data:e,timeout:5e3,complete:function(){t.handleResponse(),t.done()}}},getRequestData:function(){var e="".concat(this.width,"x").concat(this.height),t={slotid:"".concat(this.placementId),zoneid:this.getZoneID(),publishersubid:"".concat(bouncex.website.id),sizes:[e]};return"video"===this.type&&(t.mediaTypes={video:{context:"outstream",placement:"overlay"===this.deployment?5:4,playerSize:[this.width,this.height],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6],api:[1,2],playbackmethod:[2],skip:0,startdelay:0,maxduration:150,videoCallback:function(){}}}),_logger.default.debug({group:"Ads",message:"Calculating Criteo Request Data",metadata:{placement:t}}),{network_id:this.getSiteId(),placements:[t]}},getZoneID:function(){var e,t,n=this.getZones(),i="".concat(this.width,"x").concat(this.height);return _logger.default.debug({group:"Ads",message:"Calculating Criteo Zone",metadata:{zoneMap:n,dimensions:i,result:null!==(e=n[i])&&void 0!==e?e:n.default}}),null!==(t=n[i])&&void 0!==t?t:n.default},getZones:function(){var e,t,n,i,a,r=Zones[this.type];return _logger.default.debug({group:"Ads",message:"Calculating Criteo Zones",metadata:{type:this.type,baseZoneMap:Zones[this.type],country:null===(e=bouncex.state)||void 0===e||null===(e=e.geo)||void 0===e?void 0:e.country_code,result:null!==(t=r[null===(n=bouncex.state)||void 0===n||null===(n=n.geo)||void 0===n?void 0:n.country_code])&&void 0!==t?t:r.global}}),null!==(i=r[null===(a=bouncex.state)||void 0===a||null===(a=a.geo)||void 0===a?void 0:a.country_code])&&void 0!==i?i:r.global}})},2889:(e,t,n)=>{var i=n(4836),a=n(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_RevContent_Request=m,t.default=v;var r=i(n(8416)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n(3036)),s=n(2481),c=i(n(5754)),u=n(6487);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=["120x600","160x600","240x400","250x250","250x300","300x50","300x250","300x600","300x1050","320x50","320x250","320x480","336x280","640x1136","728x90","720x300","750x1334","970x90","970x250","970x550","1080x1920"],f={"900x300":300/370,"900x600":600/700,"900x800":800/1040};function v(e){o.default.call(this,e)}function m(e){o.SSP_Request.call(this,e)}Object.assign(v.prototype=Object.create(o.default.prototype,{constructor:Object.getOwnPropertyDescriptor(v.prototype,"constructor")}),{__Request_Class:m,provider:"revcontent",__createAllBidRequests:function(e){return(0,s.visitorTestMode)("bxdev")||Math.random()<.03?o.default.prototype.__createAllBidRequests.call(this,e):(c.default.debug({group:"Ads",message:"Skipped RevContent due to sampling"}),[])}}),m.__SSP_Class=v,Object.assign(m.prototype=Object.create(o.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(m.prototype,"constructor")}),{provider:"revcontent",init:function(){var e=this.getRequestData(),t=this.getOptions(e);return this.fetch(t)},handleResponse:function(e,t){var n=bouncex.campaigns[this.campaignId],i=bouncex.ads._constants.bidEvents,a=i.error,r={partner:"revcontent",partner_site_id:"wunderkind",deployment:this.deployment||"unknown",requested_ad_units:"display"===this.type?this.width+"x"+this.height:"video",request_timestamp:this.startTime,price:"NA",deal_id:"NA",auction_number:n.gbi.auctionCount,ad_unit_id:this.adUnitId};if("success"===t&&e){var o,s=this.handleSuccessfulResponse(e);a=s.status,r.creative_type=(0,u.getCreativeType)(null===(o=s.bid)||void 0===o?void 0:o.vastData,this.type)}else"nocontent"===t?a=i.empty:"abort"!==t&&"timeout"!==t||(a=i.none);this.reportResult(a,r)},handleSuccessfulResponse:function(e){var t,n=bouncex.campaigns[this.campaignId],i=bouncex.ads._constants.bidEvents,a=e.responseJSON||JSON.parse(e.responseText);if((null==a||null===(t=a.content)||void 0===t?void 0:t.length)>0){var r=bouncex.ads._createBid({provider:"revcontent",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:0,adHtml:this.getDisplayHtml(),vastData:null,arrivalTime:this.endTime,isBackfill:!0,isMultiPanel:this.isMultiPanel()});return n.gbi.bids.push(r),{status:i.fill,bid:r}}return{status:i.empty}},getOptions:function(e){var t=this;return{url:"https://".concat(this._getProviderConfig("endpoint")),data:e,method:"GET",type:"GET",dataType:"jsonp",crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(e,n){t.handleResponse(e,n),t.done()}}},getRequestData:function(){return{api_key:"144586f6b9f546fae65143148bf147c9cd0d519c",widget_id:this.getWidgetID(),pub_id:167485,domain:this.getDomain()}},getScalingRatio:function(){var e;return null!==(e=f["".concat(this.width,"x").concat(this.height)])&&void 0!==e?e:1},getDisplayHtml:function(){var e="".concat(this.width,"x").concat(this.height),t=this.getWidgetID(),n="";g.includes(e)&&(n='data-banner-size="'.concat(e,'"'));var i="data-widget-placement";this.isMultiPanel()&&(i="data-rc-widget");var a={campaign_ad_unit_id:this.placementId};return'\n        <div id="widget-pl-'.concat(t,'"\n          data-wknd-height="').concat(this.height,'"\n          data-wknd-width="').concat(this.width,'"\n          ').concat(i,'\n          data-widget-host="habitat"\n          data-endpoint="trends.revcontent.com"\n          data-widget-id="').concat(t,"\"\n          data-sub-ids='").concat(JSON.stringify(a),"'\n          ").concat(n,'\n          style="transform: scale(').concat(this.getScalingRatio(),'); transform-origin: 50% 0;"\n        ></div>\n        <script type="text/javascript"\n          src="https://assets.revcontent.com/master/delivery.js" defer="defer"><\/script>\n      ')},isMultiPanel:function(){var e=this.getWidgetID();return Object.values(this.getMultiPanelWidgets()).includes(e)},getWidgets:function(){var e=this.getMultiPanelWidgets();return p(p({},this.getSingularWidgets()),{},{"900x300":e["3x1"],"900x600":e["3x2"],"900x800":e["3x3"],"800x1200":e["3x4"]})},getDomain:function(){return{no_cbd_no_gambling:"nocbd.gambling.wunderkind.co",no_cbd_yes_gambling:"nocbd.wunderkind.co",yes_cbd_yes_gambling:"wunderkind.co"}[this._getProviderConfig("content_filter")]},getSingularWidgets:function(){return{no_cbd_no_gambling:{"970x250":270863,"300x600":270861,"300x250":270862},no_cbd_yes_gambling:{"970x250":270866,"300x600":270864,"300x250":270865},yes_cbd_yes_gambling:{"970x250":267637,"300x600":268438,"300x250":269300}}[this._getProviderConfig("content_filter")]},getMultiPanelWidgets:function(){return{no_cbd_no_gambling:{"3x1":270618,"3x2":270582,"3x3":270583,"3x4":275601},no_cbd_yes_gambling:{"3x1":270620,"3x2":270580,"3x3":270581},yes_cbd_yes_gambling:{"3x1":269299,"3x2":269312,"3x3":269313}}[this._getProviderConfig("content_filter")]},getWidgetID:function(){var e,t=this.getWidgets(),n=t["300x600"];return null!==(e=t["".concat(this.width,"x").concat(this.height)])&&void 0!==e?e:n}})},6487:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.getCreativeType=function(e,t){if(!t)return;if("video"!==t)return"html";if(!e)return;if("vastxml"===a.default.isVastOrTag(e))return"vast_xml";return"vast_url"},t.getSSPStyles=function(e){var t;return null!==(t=o[e])&&void 0!==t?t:""},t.getWunderkindSiteIDForSchain=function(){var e,t,n,i=null!==(e=null===(t=bouncex.website)||void 0===t||null===(t=t.ads)||void 0===t?void 0:t.IABPubAccountID)&&void 0!==e?e:bouncex.website.id;null!==(n=bouncex.website)&&void 0!==n&&null!==(n=n.ads)&&void 0!==n&&n.IABPubAccountID||r.default.info({group:"Ads: getWunderkindSiteIDForSchain",message:"IABPubAccountID not found. Falling back to website id."});return"".concat(i)};var a=i(n(1618)),r=i(n(5754)),o={revcontent:'\n    [data-ssp="revcontent"][data-multipanel] .bx-group-placeholder {\n      padding: 15px 15px 5px;\n    }\n\n    [data-ssp="revcontent"] .bx-group-placeholder {\n      background-color: #FFF !important;\n    }\n  '}},5432:(e,t,n)=>{var i=n(4836),a=n(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_INDEX_Request=v,t.default=f;var r=i(n(861)),o=i(n(8416)),s=n(2481),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n(3036)),u=i(n(3723)),d=n(6487);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){this.__init(e||{})}function v(e){c.SSP_Request.apply(this,arguments)}Object.assign(f.prototype=Object.create(c.default.prototype,{constructor:Object.getOwnPropertyDescriptor(f.prototype,"constructor")}),{__Request_Class:v,provider:"index",__createAllBidRequests:function(e){var t=[];return this.__groupBidRequests().forEach((function(n){var i=Object.assign(n,e),a=this.__instantiateBidRequest(i);t.push(a)}),this),t},__groupBidRequests:function(){var e=this,t=new Map,n=function(n){(e.campaign_placement_ids[n]||[]).forEach((function(e){var i={campaignID:n,placementID:e};this.addRequestGroupPlacement(t,i)}),e)};for(var i in this.auction.campaigns)n(i);return t},addRequestGroupPlacement:function(e,t){var n=t.campaignID,i=t.placementID,a=this.getRequestGroup(e,t);if(void 0!==a){var r=(0,s.getOrSet)(a.campaigns,n,this.auction.campaigns[n]),o=r.gbi.placements[i],c=(0,s.getOrSet)(a.campaignSettings,n,{campaignID:n,deployment:r.deployment,placementSettings:{}});Object.assign(t,this.__createPlacementBidRequest(n,o,i)),c.placementSettings[i]=t;var u=this.getPlacementLookupKey(t);a.lookupPlacementSettings[u]=t}},getRequestGroup:function(e,t){var n=this.getRequestKey(t);return(0,s.getOrSet)(e,n,{requestKey:n,campaigns:{},campaignSettings:{},lookupPlacementSettings:{}})},getRequestKey:function(e){var t=e.campaignID;return[t,this.auction.campaigns[t].gbi.placements[e.placementID].mediaType].join("|")},getPlacementLookupKey:function(e){var t=e.campaignID;return this.auction.campaigns[t],[e.impid].join("|")},__createPlacementBidRequest:function(e,t,n){return{impid:this.getUniqueImpressionID(),campaignID:e,placement:t,placementID:n,adUnitId:t.adUnitId,type:t.mediaType,width:t.width,height:t.height,deployment:t.deployment}}}),v.__SSP_Class=f,Object.assign(v.prototype=Object.create(c.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(v.prototype,"constructor")}),{provider:"index",intermediaryId:"869cff86d1c453c1",openRTBVersion:"2.5",init:function(){var e=this.getRequestData(),t=this.getOptions(e);return this.fetch(t)},getOptions:function(e){var t=this.isVideo(),n={url:bouncex.ssl?"https://as-sec.casalemedia.com/cygnus":"http://as.casalemedia.com/cygnus",data:{v:t?"8.8":"7",cb:Date.now(),s:this.getSiteId(),r:JSON.stringify(e)},dataType:"text",contentType:"application/x-www-form-urlencoded",global:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(e,t){this.handleResponse(e,t),this.done()}};return t&&(n.data.fn="jsonp"),n},isVideo:function(){var e=Object.values(this.campaignSettings)[0];return"video"===Object.values(e.placementSettings)[0].type},getSiteId:function(){var e=this._getProviderConfig("s"),t=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&t||e},getRequestData:function(){var e,t,n,i=this.getBaseSite(),a=(bouncex.segments||[]).map((function(e){return"".concat(e)}));i.ext=g(g({},null==i?void 0:i.ext),{},{data:g(g({},null==i||null===(e=i.ext)||void 0===e?void 0:e.data),{},{segment:a})}),i.page=this.getUrlWithParams();var o={id:String((0,s.getEpochSeconds)()),imp:[],site:i,device:this.getDevice(),source:{pchain:"".concat(this.intermediaryId,":").concat(bouncex.website.id),ext:{schain:this.schainObject()}},user:{eids:this.getExtraIds()}};for(var c in this.campaignSettings)this.__getCampaignRequestData(o,this.campaignSettings[c]);this.appendCompliance(o);var d=u.default.GetData();if(null!=d&&d.dataAvailable){var l,p,f,v,m,h,b,y;null!==(p=(l=o.site).ext)&&void 0!==p||(l.ext={}),null!==(v=(f=o.site.ext).data)&&void 0!==v||(f.data={}),d.keywords&&(o.site.ext.data.keywords=d.keywords);var _=null!==(m=null==d||null===(h=d.iab)||void 0===h||null===(h=h.v1)||void 0===h?void 0:h.map((function(e){return e.id})))&&void 0!==m?m:[],x=null!==(b=null==d||null===(y=d.iab)||void 0===y||null===(y=y.v3)||void 0===y?void 0:y.map((function(e){return e.id})))&&void 0!==b?b:[];o.site.ext.data.iab=[].concat((0,r.default)(_),(0,r.default)(x))}if(null!==(t=o.imp[0])&&void 0!==t&&t.id&&null!==(n=o.site)&&void 0!==n&&null!==(n=n.ext)&&void 0!==n&&n.data){var w=this.lookupPlacementSettings[o.imp[0].id];o.site.ext.data.placement=[null==w?void 0:w.deployment]}return o},getUrlWithParams:function(){var e=this.getCampaign().type,t=document.location.protocol+"//"+document.location.hostname+document.location.pathname,n=bouncex.state.mobile?"mobile":"desktop",i=(bouncex.segments||[]).map((function(e){return"(".concat(e,")")}));return t+"?deployment=".concat(e,"&device=").concat(n,"&segments=").concat(i.join(","))},__getCampaignRequestData:function(e,t){var n=e.imp;for(var i in t.placementSettings){var a=this.__getPlacementRequestData(t,t.placementSettings[i]);n.push(a)}return n},__getPlacementRequestData:function(e,t){return"video"===t.type?this.createVideoImpression(t):this.createDisplayImpression(t)},schainObject:function(e){var t={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:(0,d.getWunderkindSiteIDForSchain)(),hp:1}]};if(e){var n=t.nodes[0];n.rid=e,n.name=bouncex.website.name,n.domain=bouncex.website.domain}return t},handleResponse:function(e,t){var n=bouncex.ads._constants.bidEvents,i=n.error,a={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};if(200===e.status){var r=this.getBidsFromResponse(e);if(r&&r.length){var o=this.handleResponseBid.bind(this,a);return r.map(o)}i=n.empty}else"abort"===t||"timeout"===t?i=n.none:0===e.status?i=n.cancelled:204===e.status&&(i=n.empty);this.reportResult(i,a)},getBidsFromResponse:function(e){try{var t=e.responseJSON;if(!t&&e.responseText){var n=e.responseText,i=n.substring(n.indexOf("(")+1,n.lastIndexOf(")"));t=JSON.parse(i)}return t.seatbid[0].bid}catch(e){return!1}},getBidPlacementSettings:function(e){return this.lookupPlacementSettings[e.impid]},handleResponseBid:function(e,t){var n=bouncex.ads._constants.bidEvents.fill,i=this.getBidPlacementSettings(t),a=i.placementID,r=i.placement,o=i.campaignID,s=this.auction.campaigns[o];bouncex.ads.log(o,"placement #".concat(a," received a bid from ").concat(this.provider));var c=t.ext||{},u=c.dealid||t.dealid,l=c.dealname||t.dealname,p=this.convertPrice(c.pricelevel)||t.price||0,g=c.vasturl||t.adm,f="display"===i.type?i.width+"x"+i.height:"video",v=bouncex.ads._createBid({provider:this.provider,campaignId:o,placementId:a,adUnitId:r.adUnitId,arrivalTime:this.endTime,adHtml:t.adm,vastData:g,dealId:u,dealName:l,price:Number(p)});s.gbi.bids.push(v);var m=Object.assign({campaign_id:o,deployment:s.deployment||"unknown",requested_ad_units:f,deal_id:u||"NA",deal_name:l||"NA",price:this._getReportablePrice(p)||"NA",auction_number:s.gbi.auctionCount,ad_unit_id:r.adUnitId,creative_type:(0,d.getCreativeType)(v.vastData,f)},e);return this.reportResult(n,m),v},convertPrice:function(e){if(!e)return 0;var t=e.length-2,n=e.split("");n.splice(t,0,".");var i=n.join("").replace(/[^0-9.]/g,"");return Number(i).toFixed(5)}})},9436:(e,t,n)=>{var i=n(4836),a=n(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_Magnite_Request=g,t.default=p;var r=i(n(8416)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=r?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(i,o,c):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n(8897));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={"900x600":626,"800x1200":630,"1920x480":628,"300x250":15,"300x600":10,"320x50":43,"720x480":148,"728x90":2,"970x250":57,"480x320":101},l={overlay:202,infeed:203,masthead:203,endcap:203};function p(e){o.default.call(this,e)}function g(e){o.SSP_CONSOLIDATED_Request.call(this,e)}Object.assign(p.prototype=Object.create(o.default.prototype,{constructor:Object.getOwnPropertyDescriptor(p.prototype,"constructor")}),{__Request_Class:g,provider:"magnite"}),g.__SSP_Class=p,Object.assign(g.prototype=Object.create(o.SSP_CONSOLIDATED_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(g.prototype,"constructor")}),{provider:"magnite",accountId:20986,openRTBVersion:"2.5",getSiteId:function(){var e;return null!==(e=this._getProviderConfig("site_id"))&&void 0!==e?e:""},shouldIncludeSchainField:function(){var e=this._getProviderConfig("account_id");return!e||e.toString()===this.accountId.toString()},getOptions:function(e){return{method:"POST",type:"POST",url:"https://ssp.wknd.ai/magnite",data:JSON.stringify(e),dataType:"json",contentType:"application/json",global:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(e,t){this.handleResponse(e,t),this.done()}}},getRequestData:function(e){var t="".concat(bouncex.cookie.vid,"_").concat(bouncex.cookie.sid),n={id:t,site:this.getBaseSite(),device:this.getDevice(),imp:e,at:1,tmax:300,user:{eids:this.getExtraIds()}};this.shouldIncludeSchainField()&&(n.source={ext:{schain:this.schainObject(t)}});var i=this.applyCustomBidProperties(n);return this.appendCompliance(i),i},applyCustomBidProperties:function(e){var t,n,i,a,r=this,o=JSON.parse(JSON.stringify(e)),s=null===(t=o.imp[0])||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.w,c=null===(n=o.imp[0])||void 0===n||null===(n=n.banner)||void 0===n?void 0:n.h,p=null===(i=o.imp[0])||void 0===i?void 0:i.id,g=d["".concat(s,"x").concat(c)]||0;if(null!==(a=o.imp[0])&&void 0!==a&&a.hasOwnProperty("video")){var f=this.lookupPlacementSettings["".concat(p,"|video")];g=l[f.deployment]||0}var v={impExt:function(){var e,t;if(o.imp[0]){var n=null!==(e=o.imp[0].ext)&&void 0!==e?e:{};o.imp[0].ext=u(u({},n),{},{rp:{zone_id:null!==(t=r._getProviderConfig("zone_id"))&&void 0!==t?t:"",target:{website_id:[bouncex.website.id]}}})}},impBannerExt:function(){var e;null!==(e=o.imp[0])&&void 0!==e&&e.banner&&(o.imp[0].banner.ext={rp:{size_id:g,mime:"text/html"}})},impVideoExt:function(){var e;null!==(e=o.imp[0])&&void 0!==e&&e.video&&(o.imp[0].video.ext={rp:{size_id:g}})},siteExt:function(){o.site&&(o.site.ext={rp:{site_id:r.getSiteId()}})},sitePubExt:function(){var e;null!==(e=o.site)&&void 0!==e&&e.publisher&&(o.site.publisher.ext={rp:{account_id:r._getProviderConfig("account_id")||r.accountId}})}};return Object.values(v).forEach((function(e){return e()})),o},createDisplayImpression:function(e,t){var n=this.__createDisplayImpression(e,t);return n.banner.format=[{w:n.banner.w,h:n.banner.h}],n}})},7392:(e,t,n)=>{var i=n(4836),a=n(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_PBM_Request=u,t.default=c;n(2481);var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=r?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(i,o,c):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n(8897)),o=i(n(3723));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e){r.default.call(this,e)}function u(e){r.SSP_CONSOLIDATED_Request.call(this,e)}Object.assign(c.prototype=Object.create(r.default.prototype,{constructor:Object.getOwnPropertyDescriptor(c.prototype,"constructor")}),{__Request_Class:u,provider:"pbm"}),u.__SSP_Class=c,Object.assign(u.prototype=Object.create(r.SSP_CONSOLIDATED_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(u.prototype,"constructor")}),{provider:"pbm",openRTBVersion:"2.5",getOptions:function(e){var t=this;return{url:document.location.protocol+"//"+this._getProviderConfig("endpoint"),data:JSON.stringify(e),method:"POST",type:"POST",contentType:"text/plain; charset=utf-8",dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(e,n){t.handleResponse(e,n),t.done()}}},getSiteId:function(){var e=bouncex.state.mobile?"mobile_id":"desktop_id",t=this._getProviderConfig(e),n=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&n||t},getRequestData:function(e){var t,n,i,a,r=bouncex.cookie.vid+"_"+bouncex.cookie.sid,s=this._getProviderConfig("publisher_id"),c=o.default.GetData(),u="",d=this.getBaseSite();d.id=this.getSiteId(),d.publisher.id=s;var l={id:r,site:d,device:this.getDevice(),imp:e,source:{pchain:this.pchainString(),ext:{schain:this.schainObject(r)}},user:{eids:this.getExtraIds()},at:1,tmax:200};if(null!==(t=l.imp[0])&&void 0!==t&&t.id&&null!==(n=l.imp[0])&&void 0!==n&&n.banner){var p,g,f=l.imp,v="".concat(f[0].id,"|").concat(f[0].banner.w,"|").concat(f[0].banner.h);u=null!==(p=null===(g=this.lookupPlacementSettings[v])||void 0===g?void 0:g.deployment)&&void 0!==p?p:""}var m=this.constructKeyValProperty(c,bouncex.segments,u);return null!==(a=(i=l.site).ext)&&void 0!==a||(i.ext={}),l.site.ext.key_val=m,this.appendCompliance(l),l},constructKeyValProperty:function(e,t){var n,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=null!==(n=null==e||null===(i=e.iab)||void 0===i||null===(i=i.v3)||void 0===i?void 0:i.map((function(e){return e.id})))&&void 0!==n?n:[],o=r.join(","),s=(t||[]).map((function(e){return"".concat(e)})).join(","),c=o.length>0?"iabV3=".concat(o):"",u=o.length>0?"negativeTargeted=".concat(o):"",d=s.length>0?"segments=".concat(s):"",l=a.length?"placement=".concat(a):"",p=[c,u,d,l].filter((function(e){return e.length>0})).join("|");return p},getPlacementRequestData:function(e){var t={secure:bouncex.ssl?1:0,tagid:this.getSiteId()||""};return this.__getPlacementRequestData(e,t)},createDisplayImpression:function(e,t){var n=this.__createDisplayImpression(e,t);return n.banner.format=[{w:n.banner.w,h:n.banner.h}],n}})},8897:(e,t,n)=>{var i=n(4836),a=n(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_CONSOLIDATED_Request=v,t.default=f;var r=i(n(8416)),o=n(2481),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n(3036)),c=n(6487),u=i(n(7686)),d=i(n(6070));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){s.default.call(this,e)}function v(e){s.SSP_Request.call(this,e)}Object.assign(f.prototype=Object.create(s.default.prototype,{constructor:Object.getOwnPropertyDescriptor(f.prototype,"constructor")}),{__Request_Class:v,provider:null,__createAllBidRequests:function(e){var t=[];return this.__groupBidRequests().forEach((function(n){var i=Object.assign(n,e),a=this.__instantiateBidRequest(i);t.push(a)}),this),t},__groupBidRequests:function(){var e=this,t=new Map,n=function(n){(e.campaign_placement_ids[n]||[]).forEach((function(e){var i={campaignID:n,placementID:e};this.addRequestGroupPlacement(t,i)}),e)};for(var i in this.auction.campaigns)n(i);return t},addRequestGroupPlacement:function(e,t){var n=t.campaignID,i=t.placementID,a=this.getRequestGroup(e,t);if(void 0!==a){var r=(0,o.getOrSet)(a.campaigns,n,this.auction.campaigns[n]),s=r.gbi.placements[i];(0,o.getOrSet)(a.campaignSettings,n,{campaignID:n,deployment:r.deployment}),Object.assign(t,this.__createPlacementBidRequest(n,s,i)),this.getImpressionGroup(a,t).placementSettings[i]=t;var c=this.getPlacementLookupKey(t);a.lookupPlacementSettings[c]=t}},getRequestGroup:function(e,t){var n=this.getRequestKey(t);return(0,o.getOrSet)(e,n,{requestKey:n,campaigns:{},campaignSettings:{},lookupPlacementSettings:{},impressionGroups:{},lookupImpressionGroups:{}})},getRequestKey:function(e){var t=e.campaignID;return[t,this.auction.campaigns[t].gbi.placements[e.placementID].mediaType].join("|")},getImpressionGroup:function(e,t){var n=this,i=e.impressionGroups,a=this.getImpressionID(e,t);return(0,o.getOrSet)(i,a,(function(){var e=t.campaignID,i=n.getImpressionKey(t);return{impid:a,impressionKey:i,campaignID:e,placementSettings:{}}}))},getImpressionID:function(e,t){var n=this.getImpressionKey(t),i=t.impid;if(i)return e.lookupImpressionGroups[n]=i,i;var a=(0,o.getOrSet)(e.lookupImpressionGroups,n,this.getUniqueImpressionID);return t.impid=a},getImpressionKey:function(e){var t=e.campaignID;return e.placement,[t,"video"===e.type?"video":"display"].join("|")},getPlacementLookupKey:function(e){var t="video"===e.type?["video"]:[e.width,e.height];return[e.impid].concat(t).join("|")},__createPlacementBidRequest:function(e,t,n){return{campaignID:e,placement:t,placementID:n,adUnitId:t.adUnitId,type:t.mediaType,width:t.width,height:t.height,deployment:t.deployment}}}),v.__SSP_Class=f,Object.assign(v.prototype=Object.create(s.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(v.prototype,"constructor")}),{provider:null,intermediaryId:"869cff86d1c453c1",init:function(){var e,t,n=this.__getImpressionRequestData(),i=this.getRequestData(n),a=this.getOptions(i);return(0,o.hasFeatureFlag)("USE_ADS_GPS_AUCTION")&&d.default.fetchAuctionConfig(null==a||null===(e=a.context)||void 0===e?void 0:e.provider,null==a||null===(t=a.context)||void 0===t?void 0:t.requestKey,null==a?void 0:a.data),this.fetch(a)},getOptions:function(e){throw new Error("Must be implemented in subclass")},getSiteId:function(){throw new Error("Must be implemented in subclass")},getRequestData:function(e){throw new Error("Must be implemented in subclass")},__getImpressionRequestData:function(){return Object.values(this.impressionGroups).map(this.__mergeImpressionGroupData,this)},__mergeImpressionGroupData:function(e){return this.getImpressionGroupData(e).reduce(this.mergeImpressionGroupData.bind(this))},mergeImpressionGroupData:function(e,t){var n,i;return(null===(n=e.banner)||void 0===n||null===(n=n.format)||void 0===n?void 0:n.length)&&(null===(i=t.banner)||void 0===i||null===(i=i.format)||void 0===i?void 0:i.length)&&Array.prototype.push.apply(e.banner.format,t.banner.format),g(g({},t),e)},getImpressionGroupData:function(e){return Object.values(e.placementSettings).map(this.getPlacementRequestData,this)},getPlacementRequestData:function(e){return this.__getPlacementRequestData(e)},__getPlacementRequestData:function(e,t){return this["video"===e.type?"createVideoImpression":"createDisplayImpression"](e,t)},pchainString:function(){return"".concat(this.intermediaryId,":").concat(bouncex.website.id)},schainObject:function(e){var t={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:(0,c.getWunderkindSiteIDForSchain)(),hp:1}]};if(e){var n=t.nodes[0];n.rid=e,n.name=bouncex.website.name,n.domain=bouncex.website.domain}return t},handleResponse:function(e,t){var n,i=bouncex.ads._constants.bidEvents,a=i.error;if(200===e.status){var r=this.getBidsFromResponse(e);if(r.errMsg)a=i.error,n="getBidsFromResponse error: ".concat(r.errMsg);else if(r&&r.length)try{return r.map(this.handleResponseBid,this)}catch(e){a=i.error,n=e}else a=i.empty}else if("abort"===t||"timeout"===t)a=i.none;else if(0===e.status)a=i.cancelled;else if(204===e.status)a=i.empty;else{var o=e.responseJSON||JSON.parse(e.responseText),s={"debug:code":"bid_error","debug:message":t,"debug:status_code":e.status,"debug:body_length":JSON.stringify(o).length,"debug:url":decodeURIComponent(bouncex.calling_url),"debug:ssp":this.provider};u.default.report("debug",s)}var c={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};a===i.error&&(c.errMsg=n),this.reportResult(a,c)},getBidsFromResponse:function(e){try{return(e.responseJSON||JSON.parse(e.responseText)).seatbid.flatMap((function(e){return e.bid}))}catch(e){return{errMsg:e}}},getImpressionGroup:function(e){var t=this.getImpressionID(e);return this.impressionGroups[t]},getImpressionID:function(e){var t=e.impid;if(t)return t;var n=this.getImpressionKey(e);return this.lookupImpressionGroups[n]},getMediaType:function(e){var t,n;return 1===(null===(t=e.ext)||void 0===t?void 0:t.bidtype)||(null===(n=e.ext)||void 0===n?void 0:n.video)||!e.w?"video":"display"},getImpressionKey:function(e){return[e.campaignID,this.getMediaType(e)].join("|")},getPlacementLookupKey:function(e){var t="video"===this.getMediaType(e)?["video"]:[e.w,e.h];return[e.impid].concat(t).join("|")},getBidPlacementSettings:function(e,t){var n=this.getPlacementLookupKey(e),i=this.lookupPlacementSettings[n],a=t&&Object.values(t.placementSettings)[0];return i||a},handleResponseBid:function(e){var t=bouncex.ads._constants.bidEvents.fill,n=this.getResponseBidData(e),i=this.auction.campaigns[n.campaignId],a=bouncex.ads._createBid(n);i.gbi.bids.push(a),i.log("placement #".concat(a.placementId," received a bid from ").concat(a.provider));var r={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime,campaign_id:n.campaignId,deployment:n.deployment||"unknown",requested_ad_units:n.requestedAdUnits,deal_id:n.dealId||"NA",deal_name:n.dealName||"NA",price:this._getReportablePrice(n.price)||"NA",auction_number:n.auctionNumber,ad_unit_id:n.adUnitId,creative_type:(0,c.getCreativeType)(a.vastData,n.requestedAdUnits)};return this.reportResult(t,r),a},getResponseBidData:function(e){var t=this.getImpressionGroup(e),n=this.getBidPlacementSettings(e,t),i=n.placementID,a=n.placement,r=n.campaignID,o=this.auction.campaigns[r],s="video"===n.type,c="".concat(n.width,"x").concat(n.height);return{provider:this.provider,campaignId:r,placementId:i,adUnitId:a.adUnitId,price:Number(e.price||0),adHtml:e.adm,vastData:e.adm,dealId:e.dealid,dealName:e.dealname,arrivalTime:this.endTime,requestedAdUnits:s?"video":c,deployment:o.deployment||"unknown",auctionNumber:o.gbi.auctionCount}}})},3036:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_Request=v,t.default=f;var a=i(n(8416)),r=n(2481),o=n(5295),s=i(n(5754)),c=i(n(3723)),u=i(n(1634)),d=i(n(8067)),l=i(n(1660));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){this.__init(e||{})}function v(){var e=Array.prototype.slice.call(arguments);e.forEach((function(e){e&&Object.assign(this,e)}),this),this.__init()}f.PRELOAD_ENABLED=!0,f.PRELOAD_PROVIDERS=["aqbx"],f.PRERENDER_ENABLED=(0,r.hasFeatureFlag)("PRELOAD_BSW_ADS"),f.getUniqueImpressionID=function(){return String(++f.getUniqueImpressionID.counter)},f.getUniqueImpressionID.counter=0,Object.assign(f.prototype,{__Request_Class:v,provider:null,requests:null,startTime:null,endTime:null,durationTime:null,supportedOpenRTBVersion:null,campaign_ids:null,campaign_placement_ids:null,__init:function(e){Object.assign(this,e)},sendBidRequests:function(e){return this.startTime=Date.now(),e.map((function(e){return e.send()}))},createBidRequests:function(){var e={auction:this.auction,ssp:this,provider:this.provider};return this.requests=this.__createAllBidRequests(e)},__createAllBidRequests:function(e){var t=[];return this.campaign_ids.forEach((function(n){var i=this.__createCampaignBidRequests(e,n);i&&i.length&&Array.prototype.push.apply(t,i)}),this),t},__createCampaignBidRequests:function(e,t){var n={campaign:this.auction.campaigns[t],campaignId:t},i=this.campaign_placement_ids[t],a=this.__createPlacementBidRequest.bind(this,e,n);return i.map(a)},__createPlacementBidRequest:function(e,t,n){var i=t.campaign.gbi.placements[n],a=Object.assign({placement:i,placementId:n,adUnitId:i.adUnitId,type:i.mediaType,width:i.width,height:i.height,deployment:i.deployment},t,e);return this.__instantiateBidRequest(a)},__instantiateBidRequest:function(e){return v.factory(this,e)},getIncompleteRequests:function(){return this.requests.filter((function(e){return!e.isComplete()}))},checkIfDone:function(){return null!==this.endTime||null===this.requests||0===this.getIncompleteRequests().length&&(this.__done(),!0)},abortFutileRequests:function(){var e=this.getIncompleteRequests();if(0===e.length)return[];var t=!!this.auction.endTime;return e.filter((function(e){return!(!t&&e.isViable()||(e.abort(),0))}))},__done:function(){null===this.endTime&&(this.endTime=new Date,this.durationTime=this.endTime-this.startTime,this.auction.checkBidRequestsDone())},getUniqueImpressionID:f.getUniqueImpressionID}),Object.defineProperties(f.prototype,{__Request_Prototype:{writable:!0},auction:{writable:!0}}),v.__SSP_Class=f,v.factory=function(e,t){var n=e.provider,i=bouncex.ads._requestIndex[n](Object.assign({provider:n},t));return i instanceof v?i:new(e.__Request_Class||v)(i,t)},Object.assign(v.prototype,{aborted:!1,startTime:null,endTime:null,duration:null,__init:function(){this.auction||(this.auction=bouncex),this.ssp||(this.ssp=Object.create(this.constructor.__SSP_Class.prototype)),this.__initCampaigns()},__initCampaigns:function(){this.campaigns?Object.values(this.campaigns).forEach(this.__initCampaign,this):(this.campaign||this.campaignId)&&(this.campaign?this.campaignId||(this.campaignId=this.campaign.id):this.campaign=this.auction.campaigns[this.campaignId]||{},(this.campaigns={})[this.campaignId]=this.campaign,this.__initCampaign(this.campaign))},__initCampaign:function(e){e.gbi||(e.gbi={}),e.gbi.requests||(e.gbi.requests=[]),e.gbi.requests.push(this)},send:function(){return this.init()},fetch:function(e){return this.startTime=Date.now(),this.request=bouncex.utils.doAjaxRequest(e),this.request},done:function(){this.endTime||(this.endTime=Date.now(),this.duration=this.endTime-this.startTime,this.ssp&&this.ssp.checkIfDone())},shouldSample:function(){if((0,r.visitorTestMode)("bxtest"))return!0;if(void 0!==v.shouldSample)return v.shouldSample;var e=bouncex.cookie&&bouncex.cookie.did,t=(e?Number(e.slice(-2)):Math.floor(100*Math.random()))<50;return v.shouldSample=t,v.shouldSample},reportResult:function(e,t){t||(t={}),t.partner||(t.partner=this.provider),t.has_uid2||(t.has_uid=l.default.isValid()?1:0,t.has_uid_identity_hub=u.default.hasIDfromIdentityHub()?1:0);var n=t.campaign_id||this.getCampaignId();this.shouldSample()&&(s.default.debug({message:"Reporting Result (".concat(e,")"),group:"Ads Auction (".concat(t.partner,")"),campaignId:n,metadata:t}),bouncex.ads.report(n,e,t))},end:function(){this.request&&!this.endTime&&(this.aborted=!0,this.request.abort())},abort:function(){this.end()},getCampaignId:function(){return this.campaignId||Object.keys(this.campaigns||this.campaignSettings)[0]||null},getCampaign:function(e){var t=e||this.getCampaignId();return t&&(this.campaigns||this.auction.campaigns)[t]},getCampaigns:function(){return this.campaigns?Object.values(this.campaigns):this.campaignSettings?Object.keys(this.campaignSettings).map((function(e){return this.auction.campaigns[e]}),this):[this.auction.campaigns[this.campaignId]]},_getProviderConfig:function(e){return bouncex.ads._getProviderConfig(this.provider,e)},getUniqueImpressionID:f.getUniqueImpressionID,_getImpressionGPID:function(e){return"wknd/".concat(e.campaignID,"/").concat(e.deployment)},createDisplayImpression:function(e,t){return this.__createDisplayImpression(e,t)},__createDisplayImpression:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({id:e.impid||this.getUniqueImpressionID(),banner:{w:Number(e.width),h:Number(e.height)}},t||{});return n.ext=g(g({},null==t?void 0:t.ext),{},{gpid:this._getImpressionGPID(e)}),n},createVideoImpression:function(e,t){return this.__createVideoImpression(e,t)},__createVideoImpression:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="overlay"===e.deployment,i={id:e.impid||this.getUniqueImpressionID(),video:{mimes:["video/mp4","application/javascript"],minduration:3,maxduration:150,protocols:[2,3,5,6],linearity:1,api:[1,2],startdelay:0,placement:n?5:4,plcmt:n?3:4,playbackmethod:[2],maxbitrate:16e3,minbitrate:40,skip:1}};return e.width&&(i.video.w=Number(e.width)),e.height&&(i.video.h=Number(e.height)),(i=Object.assign(i,t||{})).ext=g(g({},null==t?void 0:t.ext),{},{gpid:this._getImpressionGPID(e)}),i},appendCompliance:function(e){var t,n,i;null!==(t=e.regs)&&void 0!==t||(e.regs={}),null!==(i=(n=e.regs).ext)&&void 0!==i||(n.ext={});var a,r,o,s,c=d.default.getInstance().getValues(),u=c.tcf,l=c.gdprApplies,p=c.tcString,g=c.usPrivacy;u&&(e.regs.ext.gdpr=l?1:0,null!==(a=e.user)&&void 0!==a||(e.user={}),null!==(o=(r=e.user).ext)&&void 0!==o||(r.ext={}),e.user.ext.consent=p,e.user.ext.consented_providers_settings={consented_providers:(null!==(s=u.consented_providers)&&void 0!==s?s:[]).map(Number)}),g&&(e.regs.ext.us_privacy=g),this.appendComplianceOpenRTB(this.supportedOpenRTBVersion,e)},appendComplianceOpenRTB:function(e,t){var n=d.default.getInstance().getValues(),i=n.gpp,a=n.gdprApplies,r=n.tcString;"2.6"===e&&(i&&(t.regs.gpp=i.gppString,t.regs.gpp_sid=i.sectionId),r&&(t.regs.gdpr=a?1:0,t.user.consent=r))},getExtraIds:function(){var e=window.bouncex.ads.deviceOptedStatus,t=[];e&&t.push({source:"wunderkind.co",uids:[{id:e,atype:1}]});var n=l.default.getToken();return n&&!l.default.isTokenExpired()&&t.push({source:"uidapi.com",uids:[{id:n,atype:1}]}),u.default.getIDsForBidRequests().forEach((function(e){t.push(e)})),t},getDevice:function(){return{ua:navigator.userAgent,ip:bouncex.state.vip,js:1,language:(0,o.getDeviceLanguage)().toUpperCase()}},getBaseSite:function(){var e={mobile:bouncex.state.mobile?1:0,page:decodeURIComponent(bouncex.calling_url),name:bouncex.website.name,domain:window.location.hostname,privacypolicy:1};bouncex.referrer&&(e.ref=decodeURIComponent(bouncex.referrer));var t,n=c.default.GetData();return null!=n&&n.dataAvailable&&(n.keywords&&(e.keywords=n.keywords.map((function(e){return(null!=e?e:"").replace(/_/g," ")})).join(",")),null!==(t=n.iab)&&void 0!==t&&t.v1&&(e.pagecat=n.iab.v1.map((function(e){return e.id})))),e.publisher={domain:e.domain,name:e.name},e},_getReportablePrice:function(e){return e&&Number(e).toFixed(5)},isComplete:function(){return!(!this.endTime&&!this.aborted)},isViable:function(){if(this.isComplete())return!1;for(var e=this.getCampaigns(),t=0;t<e.length;t++){var n=e[t];if(!n.failed&&!n.winningBid)return!0}return!1}}),Object.defineProperties(v.prototype,{auction:{writable:!0},ssp:{writable:!0},campaign:{writable:!0},campaigns:{writable:!0},placement:{writable:!0}})},7504:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.displayAd=void 0;n(4544);var i=n(2481),a=(t.displayAd=function(e,t,n){var i=e.getElementSlab(),o=e.deployment_type;"floater"===e.deployment&&a(i),n.append(t),"floater"===e.deployment&&r(i,o)},function(e){e.style.transition="margin-top .5s ease";var t=Math.ceil(.2*(new i.WindowProps).height);e.style.marginTop="-".concat(t,"px")}),r=function(e,t){var n=setInterval((function(){return o(e,t)}),10);setTimeout((function(){clearInterval(n),e.style.marginTop="0"}),400)},o=function(e,t){t.getIsPinned()&&(e.style.transition="",e.style.marginTop="0")}},2501:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={bidIsPerformanceAd:function(e){return!(!e||!e.dealName||-1===e.dealName.indexOf("PerformanceAds"))||(!(!e||!e.dealId||0!==e.dealId.indexOf("PA"))||!(null==e||!e.adHtml)&&-1!==e.adHtml.indexOf("wkndSegment.audienceID"))}}},7975:(e,t,n)=>{var i,a,r=n(4836),o=r(n(134)),s=r(n(8660)),c=r(n(1697)),u=n(7874),d=r(n(1871)),l=r(n(2233));null!==(a=(i=window.bouncex).products)&&void 0!==a||(i.products={}),window.bouncex.products.ads={init_public_functions:function(){bouncex.recirc=o.default,bouncex.seg=d.default,bouncex.ads=bouncex.gbi2=s.default,bouncex.pubs=l.default,bouncex.video=c.default,bouncex.gbi={shrinkToFitWindow:u.shrinkToFitWindow,shrinkToFitParent:u.shrinkToFitParent,wrapContentInIframe:u.wrapContentInIframe,log:function(e,t,n){bouncex.ads.log(e,t,n)},doAjaxRequest:function(e,t){bouncex.campaigns[e].gbi.ajaxRequest=bouncex.utils.doAjaxRequest(t)}}},preCampaignFunctions:function(){bouncex.ads.init(),bouncex.seg.init(),bouncex.pubs.init()}}},3723:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(8416)),r=i(n(8698)),o=i(n(9974)),s=i(n(5754)),c=n(1847);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var d={BaseURL:"https://contextual-analytics.wunderkind.co/api/contextual",Cache:{},determineURL:function(){var e=decodeURIComponent(bouncex.calling_url),t=(0,c.getCanonicalURL)();return null!=t?t:e},supportsContextual:function(){return"object"===(0,r.default)(bouncex.website.sspConfig)&&("index"in bouncex.website.sspConfig||"pbm"in bouncex.website.sspConfig)},GetData:function(){var e,t=d.determineURL();return null!==(e=d.Cache[t])&&void 0!==e?e:null},Fetch:function(){var e=d.determineURL();d.GetData()||o.default.get({url:d.BaseURL,data:{url:e,website_id:bouncex.website.id},error:function(t){var n,i=null==t?void 0:t.responseText;if(i)try{n=JSON.parse(i)}catch(e){}n&&void 0!==n.dataAvailable?(d.Cache[e]=n,s.default.info({group:"Ads",message:"No contextual data was available for this URL"})):s.default.warn({group:"Ads",message:"There was an error retrieving the contextual data for this page"})},success:function(t){var n,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dataAvailable:t.dataAvailable},t.verityData);null!==(n=i.threats)&&void 0!==n||(i.threats=[]),i.keywords&&(i.keywords=i.keywords.map((function(e){return e.replace(/\s+/g,"_")}))),d.Cache[e]=i,s.default.debug({group:"Ads",message:"Retrieved contextual data for this page",metadata:{originalContext:t,transformedContext:i}})}})}};t.default=d},8066:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(8416)),r=(n(2481),n(1847)),o=i(n(4460));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var c={shouldTrackImpression:function(){return Math.random()<.5},createQueryString:function(e,t){return(0,r.qs)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({anId:931508,advId:e.trigger,campId:e.placement,pubId:e.websiteId,chanId:e.ssp,placementId:e.adUnitId},t))},display:{scriptSrc:"https://pixel.adsafeprotected.com/jload?",getScriptTag:function(e){if(!c.shouldTrackImpression())return bouncex.ads.log(null,"SAMPLE: IAS script blocked"),"";var t=c.createQueryString(e,{ias_adpath:e.adsPath});return"".concat(c.display.scriptSrc).concat(t)}},video:{wrapVastURL:function(e,t){if(!t.startsWith("http"))return bouncex.ads.log(null,"VAST XML: IAS script blocked"),t;if(!c.shouldTrackImpression())return bouncex.ads.log(null,"SAMPLE: IAS script blocked"),t;e.trigger=o.default.wkndTriggerPlaceholder;var n=c.createQueryString(e,{originalVast:t});return"https://vast.adsafeprotected.com/vast?".concat(n)}}};t.default=c},1634:(e,t,n)=>{var i=n(4836),a=n(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(8698)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n(2481)),s=i(n(5754));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var u={supportsIdentityHub:function(){var e,t;if((0,o.hasFeatureFlag)("OPTOUT_IDENTITY_HUB"))return!1;if([4925,4923,5212,5213,5442,4924,4894,5204,4926,5205,5460,5206,5163,5210,5214,5211,5208,5209,5162,5207].includes(bouncex.website.id))return!1;if("object"!==(0,r.default)(bouncex.website.sspConfig))return!1;var n="pbm"in bouncex.website.sspConfig||"index"in bouncex.website.sspConfig,i="US"===(null===(e=bouncex.state)||void 0===e?void 0:e.geo.country_code)||"CA"===(null===(t=bouncex.state)||void 0===t?void 0:t.geo.country_code);return n&&i},injectIntoPage:function(){var e,t;u.supportsIdentityHub()&&((0,o.hasFeatureFlag)("ID_HUB_NO_LIVEINTENT")?(e="<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><script type=\"text/javascript\"> (function() { var purl = window.location.href; var url = '//ads.pubmatic.com/AdServer/js/pwt/156512/7601'; var profileVersionId = ''; if(purl.indexOf('pwtv=')>0){ var regexp = /pwtv=(.*?)(&|$)/g; var matches = regexp.exec(purl); if(matches.length >= 2 && matches[1].length > 0){ profileVersionId = '/'+matches[1]; } } var wtads = document.createElement('script'); wtads.async = true; wtads.type = 'text/javascript'; wtads.src = url+profileVersionId+'/pwt.js'; var node = document.getElementsByTagName('script')[0]; node.parentNode.insertBefore(wtads, node); })(); <\/script></head><body></body> </html>",t="Added IdentityHub No Liveintent Iframe"):(e='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><script type="text/javascript" async src="//ads.pubmatic.com/AdServer/js/pwt/156512/6397/pwt.js"><\/script></head><body></body></html>',t="Added IdentityHub Iframe"),bouncex.ads.identityHubFrame=o.default.createElement("iframe",{srcdoc:e,id:"bcx_identityhub_frame",title:"empty",style:"display:none"},document.body),s.default.debug({group:"Ads",message:t}))},getIDsForBidRequests:function(){var e,t;return null!==(e=null===(t=bouncex)||void 0===t||null===(t=t.ads)||void 0===t||null===(t=t.identityHubFrame)||void 0===t||null===(t=t.contentWindow)||void 0===t||null===(t=t.ihowpbjs)||void 0===t?void 0:t.getUserIdsAsEids())&&void 0!==e?e:[]},hasIDfromIdentityHub:function(){var e,t;return(null!==(e=null===(t=bouncex)||void 0===t||null===(t=t.ads)||void 0===t||null===(t=t.identityHubFrame)||void 0===t||null===(t=t.contentWindow)||void 0===t||null===(t=t.ihowpbjs)||void 0===t?void 0:t.getUserIdsAsEids())&&void 0!==e?e:[]).filter((function(e){var t;return null===(t=e.source)||void 0===t?void 0:t.includes("uidapi.com")})).length>0}};t.default=u},1660:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(6179)),r=i(n(5754)),o=n(1915),s={intervalID:null,getToken:function(){var e,t;return null!==(e=null===(t=bouncex.cookie)||void 0===t||null===(t=t.dg)||void 0===t||null===(t=t.uid2)||void 0===t?void 0:t.advertising_token)&&void 0!==e&&e},setExpirationCheck:function(){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&clearInterval(s.intervalID)}));s.intervalID=(0,o.setIntervalWrapper)((function(){s.isTokenExpired()&&s.refreshToken()}),12e5)},isTokenExpired:function(){var e,t=null===(e=bouncex.cookie)||void 0===e||null===(e=e.dg)||void 0===e||null===(e=e.uid2)||void 0===e?void 0:e.identity_expires;return t?(new Date).getTime()>t:(r.default.info({group:"UID2",message:"isTokenExpired: expiration does not exist"}),!0)},refreshToken:function(){bouncex.website.pde?(r.default.info({group:"UID2",message:"Refreshing token"}),a.default.previousCustomerLookup()):r.default.debug({group:"UID2",message:"Failed to refresh token. Prospect detector is not enabled"})},isValid:function(){return!(!s.getToken()||s.isTokenExpired())}};t.default=s},4460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={wkndTriggerPlaceholder:"wunderkind-trigger-placeholder"}},9224:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(8559)),r=i(n(2451)),o=i(n(4546)),s={getAd:function(e,t){var n=t.getElementsByTagName("MediaFile"),i=s.addMetaData(e,t),a=bouncex.campaigns[e].video.vast;o.default.checkMediaExists(e,t,n),r.default.init(e,i,t,a)},getNodeTextOrFalse:function(e,t){return a.default.parseNodeText(e.getElementsByTagName(t)[0])||!1},addMetaData:function(e,t){var n=a.default.getXmlNode(e,t,"Ad",2),i={};return null!==n&&(i.adId=n.getAttribute("id")||null,i.type=n.nodeName||null,i.system=s.getNodeTextOrFalse(n,"AdSystem"),i.title=s.getNodeTextOrFalse(n,"AdTitle"),i.description=s.getNodeTextOrFalse(n,"Description"),i.system=s.getNodeTextOrFalse(n,"AdSystem"),i.title=s.getNodeTextOrFalse(n,"AdTitle"),i.description=s.getNodeTextOrFalse(n,"Description"),i.advertiser=s.getNodeTextOrFalse(n,"Advertiser"),i.pricing=s.getNodeTextOrFalse(n,"Pricing"),i.category=s.getNodeTextOrFalse(n,"Category"),0===bouncex.campaigns[e].video.vast.wrapperLevel&&(bouncex.campaigns[e].video.vast.metaData=i),n)}};t.default=s},2451:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(8559)),r=i(n(2783)),o=i(n(1618)),s=i(n(4601)),c=i(n(6468)),u={init:function(e,t,n,i){var o,s,c,d,l,p,g,f;o=a.default.getXmlNode(e,t,"Impression",1),s=a.default.getXmlNode(e,t,"Tracking",1),c=a.default.getXmlNode(e,n,"Wrapper",0),d=null!==a.default.getXmlNode(e,t,"InLine",0)&&a.default.getXmlNode(e,t,"InLine",0),l=a.default.getXmlNode(e,d,"Linear",0)||a.default.getXmlNode(e,d,"Video",0),g=a.default.getXmlNode(e,t,"Error",1),l||d||(f=a.default.getXmlNode(e,d,"NonLinear",0),p=a.default.getXmlNode(e,t,"Companion",0)),p&&bouncex.video.log(e,"SKIP -> [parseVastElements]: companion ads not currently supported","warning"),f&&bouncex.video.log(e,"SKIP -> [parseVastElements]: nonlinear ads not currently supported","warning"),g&&r.default.recordErrorPixels(e,i,g),o&&r.default.recordImpressionPixels(i,o),s&&r.default.recordEventPixels(i,s),c&&(u.handleWrapper(e,c),bouncex.campaigns[e].video.vast.handlingWrapper=!1,bouncex.campaigns[e].video.vast.wrapperLevel+=1),l&&u.handleVideo(e,i,l)},handleVideo:function(e,t,n){r.default.recordVideoClickTrackingPixels(e,t,n),u.handleDuration(e,t,n),u.handleMediaFiles(e,t,n)},handleDuration:function(e,t,n){var i,r,o=a.default.getXmlNode(e,n,"Duration",0);null!==o&&a.default.nodeExists(o)&&"string"!=typeof o&&(i=(o=(o=a.default.getNodeValue(o)).split(".")[0]).split(":"),r=parseInt(60*i[0]*60)+parseInt(60*i[1])+parseInt(i[2]),t.duration=r,bouncex.video.log(e,"media duration -> "+t.duration+"s","vast"))},handleMediaFiles:function(e,t,n){var i,r=a.default.getXmlNode(e,n,"MediaFile",1),c=null,u=!1;if(r&&0!==r.length){for(var d=0;d<r.length;d++){if(t.width=r[d].getAttribute("width"),t.height=r[d].getAttribute("height"),t.aspectRatio=t.height/t.width*100,t.apiFramework=r[d].getAttribute("apiFramework")||!1,t.type=r[d].getAttribute("type"),t.aspectRatio=o.default.calculateAspectRatioData(t.width,t.height),t.isVPAID=!(!t.apiFramework||"vpaid"!==t.apiFramework.toLowerCase()||"application/javascript"!==t.type),t.offsetAspectRatio=bouncex.campaigns[e].video.player.offsetHeight/bouncex.campaigns[e].video.player.offsetWidth*100,i=null!==a.default.getNodeValue(r[d])?a.default.getNodeValue(r[d]):this.handleUrlSources(e,r[d]),t.type.toLowerCase().indexOf("mp4")>-1){t.src=i,u=!0;break}if(t.type.toLowerCase().indexOf("application/javascript")>-1)return s.default.handleVPAID(e,t,n,i);c={path:i,type:t.type}}!1!==u||t.vpaidUrl||null===c||(t.src=c.path,t.type=c.type,t.vpaidUrl=!1)}else bouncex.video.log(e,"0 media files found","error")},handleUrlSources:function(e,t){var n,i=a.default.getXmlNode(e,t,"URL",1);if(i)for(var r=0;r<i.length;r++)n=a.default.getNodeValue(i[r]);return n},handleWrapper:function(e,t){var n,i;r.default.processWrapperEventPixels(e,t),(i=null!==(n=a.default.getXmlNode(e,t,"VASTAdTagURL",0)||a.default.getXmlNode(e,t,"VASTAdTagURI",0)).textContent?n.textContent.trim():n.firstChild.nodeValue&&""!==n.firstChild.nodeValue.trim()?n.firstChild.nodeValue.trim():!(!n.firstChild.constructor||!n.firstChild.constructor.name||"Text"!=n.firstChild.constructor.name)&&n.firstChild.wholeText.trim())?(bouncex.campaigns[e].video.vast.handlingWrapper=!0,c.default.extractVastData(e,i)):bouncex.video.fail(e,"failed to extract a VAST URL node from the XML Wrapper element")}};t.default=u},1618:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(5754)),r={isVastOrTag:function(e){return-1!==e.indexOf("<?xml")&&(e=e.replace(/^<\?xml[^>]*>/i,"")),/^[\s]*<VAST/i.test(e)?"vastxml":"tag"},toCamelCase:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},calculateAspectRatioData:function(e,t){var n={},i=parseInt(e)/parseInt(t);switch(i){case 4/3:n.paddingTop="75%";break;case 1.5:n.paddingTop="66.6666666667%";break;case 16/9:n.paddingTop="56.25%";break;case 1:n.paddingTop=!1;break;case 1.6:n.paddingTop="62.5%"}return n.ratio=i,n},groupCollapsed:function(e,t,n){a.default.groupCollapsed({campaignId:e,message:t,group:"Vast Parser",logType:n?"error":"info"})},groupEnd:function(e,t,n){a.default.groupEnd({campaignId:e,message:t,group:"Vast Parser",logType:n?"error":"info"})}};t.default=r},3411:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4546)),r={call:function(e,t,n,i,o,s){bouncex.video.log(e,"making HTTP request ".concat(t),"vast"),a.default.checkHttpRequest(e,t,o);var c=r.createXMLRequest();c.onreadystatechange=function(){if(4==c.readyState)if(200===c.status)o&&o(e,c);else if(s){if(0!==c.status)return bouncex.video.fail(e,"XML request to parse vast data failed"),!1}else r.call(e,t,n,i,o,!0)},c.open(n,a.default.checkUrl(t).href,!0),s&&(c.withCredentials=!0);try{i?c.send(i):c.send()}catch(a){var u=!0===s?" on second try":".";bouncex.video.fail(e,"VAST [httpCall]: XHR request failed"+u+a.message),s||r.call(e,t,n,i,o,!0,"vast")}},success:function(e){return e>=200&&e<300},createXMLRequest:function(){var e;return window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e}};t.default=r},9940:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(1618)),r=i(n(6468)),o={beginParse:function(e,t,n){r.default.buildVastEnv(e,t,n)},endParse:function(e){a.default.groupEnd(e,"vast parser exit",!1)}};t.default=o},6468:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(1618)),r=i(n(4546)),o=i(n(3411)),s=i(n(2114)),c={buildVastEnv:function(e,t,n){a.default.groupCollapsed(e,"init vast parser",!1),bouncex.campaigns[e].video.vast={handlingWrapper:!1,wrapperLevel:0,tracking:{},completeCallback:n};var i=a.default.isVastOrTag(t);c.kickoffVastParse(e,i,t)},kickoffVastParse:function(e,t,n){switch(t){case"tag":return c.extractVastData(e,n);case"vastxml":return s.default.vastResponse(e,n)}},extractVastData:function(e,t){bouncex.video.log(e,"extract vast url: "+t,"vast");var n=r.default.checkVastUrl(t);o.default.call(e,n,"GET",null,s.default.vastResponse)}};t.default=c},4601:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4223)),r=i(n(8559)),o=i(n(7234)),s=n(2481),c={vastMedia:function(e,t){if(bouncex.video.canPlayMedia(e)){var n=t.src&&"string"!=typeof t.src?JSON.stringify(t.src):t.src?t.src:"";bouncex.video.log(e,"found compatible media file ("+n+")","vast"),bouncex.campaigns[e].video.status.vastDataLoaded=!0,bouncex.video.configPlayer(e)}},vpaidMedia:function(e,t){bouncex.campaigns[e].video.status.vastDataLoaded=!0;var n=Object.defineProperty;Object.defineProperty=a.default.tryCatch(n),(0,s.createElement)("script",{type:"text/javascript",src:t.vpaidUrl,onload:function(){Object.defineProperty=n,o.default.generateVPAIDManager(e)}},window.top.document.body)},handleVPAID:function(e,t,n,i){var a=r.default.getXmlNode(e,n,"AdParameters",0);t.vpaidWidth=jQuery("#bx-creative-"+e+" .bx-video-wrapper").css("width").replace(/[^0-9.]/g,""),t.vpaidHeight=jQuery("#bx-creative-"+e+" .bx-video-wrapper").css("height").replace(/[^0-9.]/g,""),t.vpaidUrl="https:"===window.location.protocol&&0===i.indexOf("http:")?"https:"+i.substring(5):i,t.isVPAID=!0,bouncex.campaigns[e].video.isVPAID=!0,a&&(a=r.default.getNodeValue(a),t.vpaidAdParams=a)}};t.default=c},8559:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(8698)),r={getXmlNode:function(e,t,n,i){var r,o,s,c;return null==t||t.length<1?(bouncex.video.log(e,"Failed to extract node -> "+n+". XML is null. Searched node: "+n,"warning"),null):null===(r="object"===(0,a.default)(t)&&t.getElementsByTagName(n))||r.length<1?("Companion"!==n&&"NonLinear"!==n&&bouncex.video.log(e,"Failed to find node -> "+n,"vast"),null):0===i?(bouncex.video.log(e,"Extracted first occurrence of node -> "+n,"vast"),r[0]):1===i?(o=r.length>1?"Extracted "+r.length+" occurrences of node -> "+n:"Extracted "+r.length+" occurrence of node -> "+n,bouncex.video.log(e,o,"vast"),r):(s=r.length-1,c=Math.round(Math.random()*s),bouncex.video.log(e,"Extracted random element["+c+"] out of "+r.length+" "+n+" nodes","vast"),r[c])},parseNodeText:function(e){return e&&(e.textContent||e.text)},nodeExists:function(e){return null!==e&&null!==e.firstChild},getNodeValue:function(e){var t=!(!e||!e.firstChild),n=!!t&&e.firstChild;if("MediaFile"===e.nodeName&&e&&e.childNodes&&e.childNodes.length>1&&"#text"===n.nodeName)for(var i=0;i<e.childNodes.length;i++)"URL"===e.childNodes[i].nodeName&&(n=e.childNodes[i],t=!0);if(t){if(n.nodeValue&&""!==n.nodeValue.trim())return n.nodeValue;if(n.nextSibling&&n.nextSibling.data&&""!==n.nextSibling.data.trim())return n.nextSibling.data;if(n.wholeText&&""!==n.wholeText&&""!==n.wholeText.trim())return n.wholeText.trim()}return null}};t.default=r},2114:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4546)),r=i(n(4601)),o=i(n(9224)),s=i(n(1618)),c={vastResponse:function(e,t){var n,i,c=bouncex.campaigns[e];if(c.video.vast.wrapperLevel>0&&!c.video.vast.handlingWrapper){var u=c.video.vast.wrapperLevel;s.default.groupCollapsed(e,"re-init vast parser, wrapper found - on loop: "+u,!1)}else bouncex.video.log(e,"init vast parser","vast");n=a.default.checkXml(t,e),i=c.video.vast,o.default.getAd(e,n,t),!c.failed&&i.vpaidUrl?(bouncex.video.log(e," -> Found VPAID","vast"),r.default.vpaidMedia(e,i),i.completeCallback&&i.completeCallback(i)):c.failed||(bouncex.video.log(e,"vast parse complete","vast"),c.video.vast.handlingWrapper||r.default.vastMedia(e,i)),c.video.vast.handlingWrapper||s.default.groupEnd(e,"exit vast parser",!1)}};t.default=c},2783:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(8559)),r=i(n(2451)),o={recordEventPixels:function(e,t){for(var n,i=0;i<t.length;i++){var r=t[i];a.default.nodeExists(r)&&(r=a.default.getNodeValue(r),n=t[i].getAttribute("event"),e.tracking[n]=e.tracking[n]||[],-1===e.tracking[n].indexOf(r)&&e.tracking[n].push(r))}},recordVideoClickTrackingPixels:function(e,t,n){var i,r,o,s=a.default.getXmlNode(e,n,"VideoClicks",0);null!==s&&(null!==(o=a.default.getXmlNode(e,s,"ClickThrough",0))&&null!==o.firstChild&&(t.clickThrough=a.default.getNodeValue(o)),r=(i=a.default.getXmlNode(e,s,"ClickTracking",0))?a.default.getNodeValue(i):null,t.tracking.clickTracking=t.tracking.clickTracking||[],r&&-1===t.tracking.clickTracking.indexOf(r)&&t.tracking.clickTracking.push(r))},recordErrorPixels:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];a.default.nodeExists(i)&&(i=a.default.getNodeValue(i),e.tracking.error=e.tracking.error||[],null!==i&&-1===e.tracking.error.indexOf(i)&&e.tracking.error.push(i))}},recordImpressionPixels:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];a.default.nodeExists(i)&&(i=a.default.getNodeValue(i),e.tracking.impression=e.tracking.impression||[],null!==i&&-1===e.tracking.impression.indexOf(i)&&e.tracking.impression.push(i))}},processWrapperEventPixels:function(e,t){bouncex.video.log(e,"WRAPPER: init extraction","vast");var n=bouncex.campaigns[e].video.vast,i=a.default.getXmlNode(e,t,"Impression",1),s=a.default.getXmlNode(e,t,"Tracking",1),c=a.default.getXmlNode(e,t,"Linear",0),u=a.default.getXmlNode(e,t,"Error",1);i&&(bouncex.video.log(e,"WRAPPER: handling impressions","vast"),o.recordImpressionPixels(n,i)),u&&(bouncex.video.log(e,"WRAPPER: handling error pixels","vast"),o.recordErrorPixels(e,n,u)),s&&(bouncex.video.log(e,"WRAPPER: handling tracking events","vast"),o.recordEventPixels(n,s)),c&&(bouncex.video.log(e,"WRAPPER: handling inline ad click tracking","vast"),r.default.handleVideo(e,n,c))}};t.default=o},4546:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(7352),r=i(n(8559)),o=i(n(1434)),s={checkMediaExists:function(e,t,n){if(null===n||n.length<1){var i=r.default.getXmlNode(e,t,"Wrapper",0),a=r.default.getXmlNode(e,t,"status",0);a&&"NO_AD"===a.innerHTML&&bouncex.video.fail(e,"vastResponse with no ad - status: "+a.innerHTML+", campaign failed."),null===i&&bouncex.video.fail(e,"vastResponse without video, campaign failed")}},checkVastUrl:function(e){var t=s.checkUrl(e),n=t.href||null;return"https:"===window.location.protocol&&"https"!==t.protocol&&(n="https:"+n.substring(5)),n},checkHttpRequest:function(e,t,n){"function"!=typeof n&&bouncex.video.fail(e,"VAST [validateHttpCall]: callback is not a function",!0),"string"!=typeof t&&bouncex.video.fail(e,"VAST [validateHttpCall]: not a valid url",!0)},checkUrl:function(e){var t=document.documentMode,n=document.createElement("a");return t&&(n.setAttribute("href",e),e=n.href),n.setAttribute("href",e),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",hostname:n.hostname,path:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}},checkXml:function(e,t){var n;if("string"==typeof e){n=s.parseStringToXMLWithMacroReplacement(e,t)}else{if(null===e&&null===e.responseXML&&null===e.responseText){var i=e?{url:encodeURIComponent(e.responseURL)}:{};return bouncex.video.log(t,"vast url returned null response | "+i,"error"),!1}var a=e.responseXML||e.responseText||e.response;if("string"==typeof a)try{n=s.parseStringToXMLWithMacroReplacement(a,t)}catch(e){return bouncex.video.log(t,"vastResponse returned null from url "+i,"error"),!1}else n=a}return n},parseStringToXMLWithMacroReplacement:function(e,t){var n=bouncex.campaigns[t],i=(0,a.ReplaceMacros)(e,n);return o.default.convertStringToXML(i)}};t.default=s},1434:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n(1618));var a={convertStringToXML:function(e){if(void 0===window.DOMParser){var t=new ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t}var n,i=new DOMParser;try{(n=i.parseFromString(e,"application/xml"))&&""!==n&&!a.parsingError(n)||bouncex.log("error parsing XML string")}catch(e){bouncex.log("error parsing XML string")}return n},parsingError:function(e){try{var t=(new DOMParser).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return e.getElementsByTagNameNS(t,"parsererror").length>0}catch(e){bouncex.log("xml parsing error: ",e)}},parseXmlText:function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():e.trim()}};t.default=a},1697:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(8646)),r=i(n(9940)),o=i(n(7234)),s=n(9476),c=i(n(5754)),u=i(n(8066)),d=i(n(1618));function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var g={constants:{completionThresholdInSeconds:2},init:function(e,t,n,i){var a,o,s,c,l,p=bouncex.campaigns[e];p.video=p.video||{};var g=t;"vastxml"===d.default.isVastOrTag(g)&&(g=Math.random()<.05?"https://dfp.bouncex.net/pub/vast-stream/".concat(bouncex.lz.compressToEncodedURIComponent(t)):"https://dfp.bouncex.net/pub/vast/".concat(bouncex.lz.compressToEncodedURIComponent(t)));g=u.default.video.wrapVastURL({trigger:p.trigger,placement:null!==(a=null==i?void 0:i.deployment)&&void 0!==a?a:"",ssp:null!==(o=null===(s=p.winningBid)||void 0===s?void 0:s.provider)&&void 0!==o?o:"",websiteId:bouncex.website.id,adUnitId:null!==(c=null===(l=p.winningBid)||void 0===l?void 0:l.adUnitId)&&void 0!==c?c:""},g),bouncex.video.buildEnv(e,n,i);try{r.default.beginParse(e,g)}catch(t){bouncex.video.fail(e,t)}},buildEnv:function(e,t,n){var i=bouncex.campaigns[e].video;i.player=document.getElementById("bx-video-player-"+e),i.player&&jQuery(i.player).closest(".bx-group").addClass("bx-group-placeholder"),i.uniqueEventPixels=[],i.vast={},i.vpaid={},i.integrations={},i.config={},i.config.provider=t,i.creative={},i.creative.requestWidth=n.width,i.creative.requestHeight=n.height,i.status={ready:!1,passedCompletionThreshold:!1,qOne:!1,midpoint:!1,qThree:!1,vastDataLoaded:!1,stopped:!1}},canPlayMedia:function(e){var t=document.createElement("VIDEO"),n=bouncex.campaigns[e].video.vast.type;if("maybe"===t.canPlayType(n)||"probably"===t.canPlayType(n))return bouncex.video.log(e,"media file supported","player"),!0;var i=bouncex.campaigns[e].video.vast.wrapperLevel||!1;return r.default.endParse(e),i&&!n?bouncex.video.log(e,"no media found on wrapper level "+i,"warning"):bouncex.video.log(e,"video player does not support "+n,"error"),!1},bxPlayerPop:function(e,t){var n=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player);bouncex.report(e,"pop",{"pop:activation":t,video_type:n.isVPAID?"VPAID":"VAST",media_type:n.type,media_size:n.dimensions.videoWidth+"x"+n.dimensions.videoHeight})},onPlay:function(e){var t=bouncex.campaigns[e],n=t.video.player,i=t.video.config.provider,a=bouncex.campaigns[e].video.config.src.indexOf("/demo/ads_demo_video.mp4")>-1;bouncex.video.getPlayerSnapshot(e,n);bouncex.off(jQuery(n),"onplay"),t.video.videoResponseLoaded=!0,"aqbx"===i&&a&&bouncex.video.aqbxStyleFix(e,n);try{n.play()}catch(t){bouncex.video.log(e,"error: "+t,"error")}bouncex.video.toggleMute(e,!0),bouncex.video.fireTrackingEvents(e,"start")},play:function(e){var t=bouncex.campaigns[e],n=bouncex.video.getPlayerSnapshot(e,t.video.player);n.isVPAID&&n.ready&&t.video.videoResponseLoaded?t.video.vpaid.ad.startAd():!n.playing&&n.ready&&t.video.videoResponseLoaded&&t.video.player.play()},playVideo:function(e,t,n){var i=bouncex.campaigns[e];if(a.default.currentTab.isVisible()){if(i.isGBI2&&!i.getClientVisibility())return i.onClientVisible(bouncex.video.playVideo.bind(this,e,t,n));i.listeners.onTabVisibilityChange((function(){bouncex.video.playPauseVisibility(e)})),i.listeners.onScroll((function(){bouncex.video.playPauseVisibility(e)}));var r=i.video&&i.video.player||i.gbi&&i.gbi.player;r&&(r.muted=r.playsInline=!0,r.autoplay="0"!==r.getAttribute("data-wknd-autoplay")),t?bouncex.isBxPlayerCampaign(e)?bouncex.video.playVideoBeforeImpression(n,e):c.default.deprecated({group:"gbi",message:"gbi.playVideoBeforeImpression would have been called",campaignId:e}):i&&i.gbi&&i.gbi.player?i.gbi.player.play():bouncex.isBxPlayerCampaign(e)&&bouncex.video.play(e)}else i.listeners.onTabVisible(bouncex.video.playVideo.bind(this,e,t,n))},isPlayableVideoCampaign:function(e,t){var n=bouncex.campaigns[e],i=n.gbi&&n.gbi.isVideo;if(t||!1){if(!n.video&&i&&n.gbi.playBeforeImpression&&!n.gbi.videoResponseLoaded)return!0;if(bouncex.isBxPlayerCampaign(e)&&bouncex.video.ready(e))return n.video.status.isPlayable=!0,!0}else{if(!bouncex.isBxPlayerCampaign(e)&&i&&n.gbi.config.playOnImpression&&n.gbi.player&&"playing"!==n.gbi.player.getState())return!0;if(bouncex.isBxPlayerCampaign(e)&&i&&!n.ad_shown)return n.video.status.isPlayable=!0,!0}return!1},playVideoBeforeImpression:function(e,t){var n=bouncex.campaigns[t],i=n.video.player;bouncex.video.getPlayerSnapshot(t,n.video.player).isVPAID?o.default.playVPAIDBeforeImpression(e,t):(bouncex.on(jQuery(i),"onplay",bouncex.video.onPlay(t)),bouncex.on(jQuery(i),"onerror",(function(e){jQuery(i).off("onerror"),i.pause(),bouncex.campaigns[t].video.status.stopped=!0,bouncex.video.fail(t,e.message?e.message:"error loading video response")})),n.video.videoResponseLoaded&&(bouncex.show_ad(e,t),bouncex.video.fireTrackingEvents(t,"impression")))},configPlayer:function(e){var t=bouncex.campaigns[e],n=t.video.config||{},i=t.video.vast,a=bouncex.video.getPlayerSnapshot(e,t.video.player);if(a.isVPAID||(n.src=i.src||"//"+bouncex.website.biu+"/assets/global/videos/pub/demo/ads_demo_video.mp4",n.clickThroughUrl=i.clickThrough||!1),n.aspectRatio=i.aspectRatio,n.offsetAspectRatio=i.offsetAspectRatio,a.isVPAID?(n.width=i.vpaidWidth,n.height=i.vpaidHeight):(n.width=i.width,n.height=i.height),bouncex.video.stylePlayer(e),a.isVPAID)bouncex.video.addVpaidEventTrackingListeners(e);else{var r=document.getElementById("bx-video-player-"+e);jQuery(r).attr("src",bouncex.campaigns[e].video.config.src),bouncex.video.setClickThroughUrl(e,n.clickThroughUrl),bouncex.video.addVideoEventTrackingListeners(e)}bouncex.ads.watchVideoLoad(e),t.video.config=n},setClickThroughUrl:function(e,t){var n=bouncex.campaigns[e].video.player;""!==t&&!1!==t&&jQuery(n).attr("href",t)},clickThroughHelper:function(e,t){window.open(t,"_blank").focus()},toggleMute:function(e,t){var n=bouncex.campaigns[e].video.player;n.muted=!!t||!n.muted,n.muted||0!==n.volume||(n.volume=.75),this.updatePlayerButtons(n)},playPausePlayer:function(e){try{var t=bouncex.campaigns[e].video,n=t.player;n.paused||n.ended?(n.play(),t.manuallyPaused=!1):(n.pause(),t.manuallyPaused=!0),this.updatePlayerButtons(n)}catch(t){null!=t&&t.message&&c.default.error({group:"Ads",message:"playPauseVisibility error: ".concat(t.message.toString()),campaignId:e})}},playPauseVisibility:function(e){try{var t=bouncex.campaigns[e].video,n=t.player;if(t.status.passedCompletionThreshold)return void(n.paused||bouncex.video.log(e,"player left alone due to not meeting the completion threshold","player"));a.default.currentTab.isVisible()?a.default.viewport.elementInViewport(n)?t.manuallyPaused||!n.paused&&!n.ended||n.play():(n.paused||bouncex.video.log(e,"player paused because video out of viewport","player"),n.pause()):(n.paused||bouncex.video.log(e,"player paused on tab hide","player"),n.pause())}catch(t){null!=t&&t.message&&c.default.error({group:"Ads",message:"playPauseVisibility error: ".concat(t.message.toString()),campaignId:e})}},updateProgressPlayer:function(e){var t=document.getElementById("bx-video-progress-wrapper-"+e);if(null!==t){var n=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player),i=!1!==n.time.inSeconds?n.time.inSeconds:0,a=Math.floor(n.time.durationRounded),r=bouncex.video.getFormattedTime(i),o=bouncex.video.getFormattedTime(a);jQuery(".bx-video-progress-time-left",t).text(r),jQuery(".bx-video-progress-time-total",t).text(o)}},toMinutes:function(e){return(e/60).toFixed(2).replace(".",":")},toSeconds:function(e){return e<10&&(e=("0"+e).slice(-2)),e="0:"+e},getFormattedTime:function(e){return e<60?bouncex.video.toSeconds(e):bouncex.video.toMinutes(e)},canPlay:function(e){if(!bouncex.campaigns[e].video.isVPAID){var t=bouncex.campaigns[e].video.status;t.ready=!0,t.canPlayEvent=!0,bouncex.video.playerReady(e),jQuery(bouncex.campaigns[e].video.player).unbind("canplay.bx-"+e)}},ready:function(e){var t=bouncex.campaigns[e];return t.video.status&&t.video.status.ready&&!t.video.videoResponseLoaded},playerReady:function(e){var t=bouncex.campaigns[e];t.video.status.ready?(t.video.isVPAID||bouncex.video.updateProgressPlayer(e),bouncex.ads._activateCampaign(e),t.trigger&&!t.ad_visible&&bouncex.show_ad(t.trigger,e)):bouncex.video.log(e,"player not ready","player")},getPlayerSnapshot:function(e,t){var n=bouncex.campaigns[e].video.vast,i=t.duration||n.duration,a=Math.floor(.25*i),r=Math.floor(2*a),o=Math.floor(3*a),s=bouncex.campaigns[e].video.status,c=bouncex.campaigns[e].video.vast,u=bouncex.campaigns[e].video.creative;return{ended:t.ended,playing:!t.paused,paused:t.paused,type:t.currentType||n.type,src:t.currentSrc||c.vpaidUrl,clickThroughUrl:n.clickThrough,muted:t.muted,volume:t.volume,ready:s.ready||!1,playbackRate:t.playbackRate,seeking:t.seeking,isVPAID:bouncex.campaigns[e].video.vast.isVPAID,vastDataLoaded:s.vastDataLoaded,dimensions:{offsetWidth:t.offsetWidth,offsetHeight:t.offsetHeight,videoWidth:t.videoWidth||n.vpaidWidth,videoHeight:t.videoHeight||n.vpaidHeight,requestWidth:u.requestWidth,requestHeight:u.requestHeight},time:{duration:i,durationRounded:Math.floor(i),currentUnformatted:t.currentTime||!1,inSeconds:parseInt(t.currentTime%60)||!1,firstQuartile:{value:a,passed:s.qOne||!1},midpoint:{value:r,passed:s.midpoint||!1},thirdQuartile:{value:o,passed:s.qThree||!1}}}},stylePlayer:function(e){var t=bouncex.campaigns[e].video.creative;t.dynamicHeight=bouncex.campaigns[e].obj1.find(".bx-creative-"+e+" .bx-row-video").width(),t.dynamicWidth=bouncex.campaigns[e].obj1.find(".bx-creative-"+e+" .bx-row-video").height(),jQuery(".bxc.bx-campaign-"+e).addClass("bx-width-full-content"),jQuery("body").on("focus","#bx-video-btns-"+e+" .bx-video-btn",(function(){jQuery("#bx-video-wrapper-"+e).addClass("bx-video-wrapper-has-focus")})).on("blur","#bx-video-btns-"+e+" .bx-video-btn",(function(){jQuery(".bx-video-wrapper-"+e).removeClass("bx-video-wrapper-has-focus")})),bouncex.campaigns[e].video.vast.isVPAID||bouncex.video.adjustAspectRatio(e)},adjustAspectRatio:function(e){var t=bouncex.campaigns[e].video,n=t.vast.aspectRatio.paddingTop,i=t.vast.aspectRatio.ratio,a=t.creative.dynamicWidth/t.creative.dynamicHeight,r=t.config.src.indexOf("/demo/ads_demo_video.mp4")>-1&&"aqbx"===bouncex.campaigns[e].video.config.provider,o="300"===t.config.height&&"400"===t.config.width&&"75%"===n;!n||i===a||r||o||(jQuery("#bx-video-wrapper-"+e).addClass("bx-video-aspectRatio-fix-"+e),jQuery(".bx-video-aspectRatio-fix-"+e).css("padding-top",n))},aqbxStyleFix:function(e,t){var n=jQuery(t)[0].videoHeight,i=jQuery(t)[0].videoWidth,a=(Number(jQuery(".bx-creative-"+e+" .bx-row-video").css("width").split("px")[0])/(i/n)).toString()+"px";jQuery(".bx-creative-"+e+" .bx-video-wrapper").css("height",a)},detectVideoProgress:function(e,t,n,i){var a=bouncex.campaigns[e].video.status,r=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player),o=r.time.inSeconds;t!==o||r.time.firstQuartile.passed?n!==o||r.time.midpoint.passed?i!==o||r.time.thirdQuartile.passed?bouncex.video.constants.completionThresholdInSeconds<=o&&!a.passedCompletionThreshold&&(a.passedCompletionThreshold=!0,bouncex.video.log(e,"player made it to completion threshold","player")):(bouncex.video.fireTrackingEvents(e,"thirdQuartile"),a.qThree=!0):(bouncex.video.fireTrackingEvents(e,"midpoint"),a.midpoint=!0):(bouncex.video.fireTrackingEvents(e,"firstQuartile"),a.qOne=!0)},addVideoEventTrackingListeners:function(e){var t=document.getElementById("bx-video-player-"+e),n=" volumechange.bx-"+e+" canplay.bx-"+e+" durationchange.bx-"+e+" ended.bx-"+e+" pause.bx-"+e+" play.bx-"+e+" playing.bx-"+e+" timeupdate.bx-"+e+" loadeddata.bx-"+e+" error.bx-"+e+" canplaythrough.bx-"+e+" onplay.bx-"+e+" loadedmetadata.bx-"+e,i=" touchend.bx-"+e+" click.bx-"+e,a=bouncex.campaigns[e];bouncex.campaigns[e].video.player=t,(0,s.bxBind)(t,n,(function(n){bouncex.video.handleVideoEvents(e,t,n)})),(0,s.bxBind)(t,i,(function(n){a.video.isInClickState||(a.video.isInClickState=!0,bouncex.video.handleVideoEvents(e,t,n),setTimeout((function(){a.video.isInClickState=!1}),350))})),this.handleVideoClose(e)},addVpaidEventTrackingListeners:function(e){var t=document.getElementById("bx-video-player-"+e),n=" volumechange.bx-"+e+" ended.bx-"+e+" pause.bx-"+e+" play.bx-"+e;(0,s.bxBind)(t,n,(function(e){bouncex.video.updatePlayerButtons(t)}))},handleVideoEvents:function(e,t,n){var i=n.type,a=bouncex.campaigns[e].video.status,r=bouncex.video.getPlayerSnapshot(e,t);if("canplaythrough"!==i||a.canPlayEvent)if("loadedmetadata"===i&&bouncex.browser.ios)t.setAttribute("playsinline",""),bouncex.video.canPlay(e);else if("canplay"===i)bouncex.video.canPlay(e);else if("volumechange"===i)this.handleVolumechangeEvent(e,r,t);else if("timeupdate"!==i||r.isVPAID)if("ended"===i)this.handleEndEvent(e,r);else if("error"===i){var o=n.data&&n.data.message?n.data.message:"an error has occurred, campaign failed";bouncex.video.fail(e,o)}else"click"!==i&&"touchend"!==i||this.handleClickEvent(e,r);else this.handleTimeUpdateEvent(e,r);else bouncex.video.canPlay(e);["play","pause","ended","volumechange"].indexOf(i)>=0&&this.updatePlayerButtons(t)},handleVideoClose:function(e){var t=document.getElementById("bx-video-player-"+e),n=document.getElementById("bx-creative-"+e).getElementsByClassName("bx-close-link");bouncex.campaigns[e].video.player=t,jQuery(n).on("click.bx-"+e,(function(){bouncex.video.getPlayerSnapshot(e,t);!1===bouncex.campaigns[e].video.vast.isVPAID&&(bouncex.campaigns[e].video.status.stopped=!0,t.pause()),t.ended=!0}))},handleVolumechangeEvent:function(e,t,n){n.muted&&bouncex.video.fireTrackingEvents(e,"mute")},handleTimeUpdateEvent:function(e,t){bouncex.video.updateProgressPlayer(e),bouncex.video.detectVideoProgress(e,t.time.firstQuartile.value,t.time.midpoint.value,t.time.thirdQuartile.value)},handleClickEvent:function(e,t){if(t.clickThroughUrl)try{bouncex.video.clickThroughHelper(e,t.clickThroughUrl)}catch(e){}bouncex.video.report(e,"click"),bouncex.video.fireTrackingEvents(e,"click"),bouncex.video.fireTrackingEvents(e,"clickTracking")},handleEndEvent:function(e,t){bouncex.video.fireTrackingEvents(e,"complete"),bouncex.off(bouncex.window," volumechange.bx-"+e+" canplay.bx-"+e+" durationchange.bx-"+e+" ended.bx-"+e+" pause.bx-"+e+" play.bx-"+e+" playing.bx-"+e+" timeupdate.bx-"+e+" loadeddata.bx-"+e+" error.bx-"+e+" click.bx-"+e+" canplaythrough.bx-"+e+"touchend.bx-"+e+"onplay.bx-"+e)},updatePlayerButtons:function(e){var t={ended:e.ended,paused:!e.ended&&e.paused,playing:!e.ended&&!e.paused,muted:e.muted,unmuted:!e.muted},n=jQuery(e).closest(".bx-video-wrapper");Object.keys(t).forEach((function(e){n.toggleClass("bx-video-player-"+e,!!t[e])}))},getEventUrls:function(e,t){var n;return!(!(n=bouncex.campaigns[e].video.vast.vpaidUrl?bouncex.campaigns[e].video.vpaid.vastConfig.tracking[t]:bouncex.campaigns[e].video.vast.tracking[t])||0===n.length)&&("string"==typeof n&&(n=[n]),n)},fireTrackingEvents:function(e,t){var n=!1,i=bouncex.campaigns[e].video.uniqueEventPixels||[],a=this.getEventUrls(e,t);if("boolean"!=typeof a){var r,o=l(a);try{for(o.s();!(r=o.n()).done;){var s=r.value;null==s||s.length<1||-1===s.indexOf("http")||(i.includes(s)?n=!0:(i.push(s),bouncex.video.log(e,n?"already fired event pixel for "+t:"firing event pixel "+s+" for "+t,"eventpixel"),document.createElement("img").src=s))}}catch(e){o.e(e)}finally{o.f()}}},_integrations:{},report:function(e,t,n){bouncex.video.log(e,'reporting event "'+t+'"',"player");var i=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player);(n=n||{}).source="ads",n.agent="js",n.video_type=i.isVPAID?"VPAID":"VAST",n.media_type=i.type,n.media_size=i.dimensions.videoWidth+"x"+i.dimensions.videoHeight,n.video_length=i.time.duration,"video_pause"===t&&(n.pause_location=i.time.currentUnformatted),bouncex.buildReport(e,t,n)},log:function(e,t,n){var i,a="info";switch(n){case"vast":i="#09AF59";break;case"vpaid":i="#226666";break;case"player":default:i="#8E29D4";break;case"error":i="#FF0000",a="error";break;case"warning":i="#F67917",a="warn";break;case"eventpixel":i="#956843"}c.default[a]({color:i,campaignId:e,group:"vast"===n?"VAST":"Video [".concat(n,"]"),message:t})},fail:function(e,t){bouncex.campaigns[e].failed=!0,bouncex.video.log(e,t,"error")}};t.default=g},2113:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(8646)),r=i(n(2349)),o=i(n(2358)),s={onAdLoaded:function(){o.default.adLoaded(this.campaignId,this),r.default.fireTrackingRequests(this.campaignId,"AdLoaded",this.vastConfig.tracking.loaded),this.ad.unsubscribe(this.callbacks.AdLoaded,"AdLoaded")},onAdStarted:function(){var e=this.ad.getAdVolume();r.default.fireTrackingRequests(this.campaignId,"AdStarted",this.vastConfig.tracking.creativeView),this.adUnit.lastVolume=e,o.default.adStarted(this.campaignId)},onAdUserClose:function(){r.default.fireTrackingRequests(this.campaignId,"AdUserClose",this.vastConfig.tracking.close)},onAdUserMinimize:function(){r.default.fireTrackingRequests(this.campaignId,"AdUserMinimize",this.vastConfig.tracking.collapse)},onAdUserAcceptInvitation:function(){r.default.fireTrackingRequests(this.campaignId,"AdUserAcceptInvitation",this.vastConfig.tracking.acceptInvitation)},onAdSkippableStateChange:function(){this.ad.getAdSkippableState()},onAdStopped:function(){bouncex.campaigns[this.campaignId].video.status.stopped=!0},onAdPaused:function(){var e=bouncex.campaigns[this.campaignId].video;e.manuallyPaused=e.manuallyPaused||a.default.currentTab.isVisible(),r.default.fireTrackingRequests(this.campaignId,"AdPaused",this.vastConfig.tracking.pause)},onAdPlaying:function(){bouncex.campaigns[this.campaignId].video.manuallyPaused=!1,r.default.fireTrackingRequests(this.campaignId,"AdPlaying",this.vastConfig.tracking.resume)},onAdVolumeChange:function(){var e=this.ad.getAdVolume(),t=this.adUnit.lastVolume;0===e&&t>0?r.default.fireTrackingRequests(this.campaignId,"AdVolumeChange",this.vastConfig.tracking.mute,"volumechange"):e>0&&0===t&&r.default.fireTrackingRequests(this.campaignId,"AdVolumeChange",this.vastConfig.tracking.unmute,"volumechange"),this.adUnit.lastVolume=e},onAdImpression:function(){r.default.fireTrackingRequests(this.campaignId,"AdImpression",this.vastConfig.tracking.impression)},onAdVideoStart:function(){bouncex.video.toggleMute(this.campaignId,!0),this.adUnit.started=!0,r.default.fireTrackingRequests(this.campaignId,"AdVideoStart",this.vastConfig.tracking.start)},onAdSkipped:function(){r.default.fireTrackingRequests(this.campaignId,"AdSkipped",this.vastConfig.tracking.skip),bouncex.close_ad(this.campaignId)},onAdVideoFirstQuartile:function(){var e=this.campaignId;r.default.fireTrackingRequests(this.campaignId,"AdVideoFirstQuartile",this.vastConfig.tracking.firstQuartile),bouncex.campaigns[e].video.status.qOne=!0},onAdVideoMidpoint:function(){var e=this.campaignId;r.default.fireTrackingRequests(this.campaignId,"AdVideoMidpoint",this.vastConfig.tracking.midpoint),bouncex.campaigns[e].video.status.midpoint=!0},onAdVideoThirdQuartile:function(){var e=this.campaignId;r.default.fireTrackingRequests(this.campaignId,"AdVideoThirdQuartile",this.vastConfig.tracking.thirdQuartile),bouncex.campaigns[e].video.status.qThree=!0},onAdClickThru:function(e,t,n){var i=this.campaignId;bouncex.campaigns[i].video.vast.clickThrough=e,void 0!==n&&1==n&&e&&window.open(e),r.default.fireTrackingRequests(this.campaignId,"AdClickThru",this.vastConfig.tracking.clickTracking)},onAdDurationChange:function(){r.default.fireTrackingRequests(this.campaignId,"AdDurationChange",this.vastConfig.tracking.durationchange)},onAdSizeChange:function(){(document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullscreenElement)&&r.default.fireTrackingRequests(this.campaignId,"AdSizeChange",this.vastConfig.tracking.fullscreen)},onAdVideoComplete:function(){r.default.fireTrackingRequests(this.campaignId,"AdVideoComplete",this.vastConfig.tracking.complete)},onAdError:function(e){r.default.fireTrackingRequests(this.campaignId,"AdError",this.vastConfig.tracking.error)}};t.default=s},2846:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.adjustCreative=function(e){},t.validateAd=function(e){for(var t=0,n=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];t<n.length;t++){var i=n[t];if("function"!=typeof e[i])return!1;e[i]=a.default.tryCatch(e[i])}return!0},t.versionCheck=function(e){var t=bouncex.campaigns[e].video.vpaid.ad.handshakeVersion("2.0");if(t&&"2.0"!==t)return bouncex.video.log(e,"generateVPAIDManager -> Ad VPAID version ("+t+") is not supported","error"),!1;return!0};var a=i(n(4223))},7234:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(2846),r=i(n(2777)),o={generateVPAIDManager:function(e){bouncex.video.configPlayer(e),bouncex.campaigns[e].video.vpaid=bouncex.campaigns[e].vpaid||{};try{bouncex.video.log(e,"getVPAIDAd() called","vpaid"),bouncex.campaigns[e].video.vpaid.ad=window.getVPAIDAd(),(0,a.versionCheck)(e)}catch(t){bouncex.campaigns[e].video.vpaid.ad=document.getVPAIDAd()}r.default.initializeVPAID(e)},playVPAIDBeforeImpression:function(e,t){var n=bouncex.campaigns[t].video;n.videoResponseLoaded=!0,n.triggerType=e,n.vpaid.ad.startAd()}};t.default=o},2777:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(2846),r=i(n(2113)),o={buildEnvironment:function(e,t,n,i){bouncex.video.log(e,"building VPAID environment","vpaid");var a=t,o=i;return a.campaignId=e,a.ad=bouncex.campaigns[e].video.vpaid.ad,a.vastConfig=bouncex.campaigns[e].video.vast,a.config={},o&&((o=o.appendChild(document.createElement("div"))).className="bx-vpaid-slot bx-row-html"),a.callbacks={AdClickThru:r.default.onAdClickThru,AdDurationChange:r.default.onAdDurationChange,AdError:r.default.onAdError,AdImpression:r.default.onAdImpression,AdLoaded:r.default.onAdLoaded,AdPaused:r.default.onAdPaused,AdPlaying:r.default.onAdPlaying,AdSizeChange:r.default.onAdSizeChange,AdSkippableStateChange:r.default.onAdSkippableStateChange,AdSkipped:r.default.onAdSkipped,AdStarted:r.default.onAdStarted,AdStopped:r.default.onAdStopped,AdUserAcceptInvitation:r.default.onAdUserAcceptInvitation,AdUserClose:r.default.onAdUserClose,AdUserMinimize:r.default.onAdUserMinimize,AdVideoComplete:r.default.onAdVideoComplete,AdVideoFirstQuartile:r.default.onAdVideoFirstQuartile,AdVideoMidpoint:r.default.onAdVideoMidpoint,AdVideoStart:r.default.onAdVideoStart,AdVideoThirdQuartile:r.default.onAdVideoThirdQuartile,AdVolumeChange:r.default.onAdVolumeChange},a.adUnit={lastVolume:""},a.config.creativeData={},a.config.environmentVars={},a.config.viewMode="normal",a.config.desiredBitrate=-1,a.config.environmentVars.slot=o,a.config.environmentVars.videoSlot=n,a.config.environmentVars.autoPlay=!1,a.config.environmentVars.videoSlotCanAutoPlay=!0,a},initializeVPAID:function(e){bouncex.video.log(e,"init VPAID","vpaid");var t=bouncex.document[0].getElementById("bx-video-player-"+e),n=bouncex.document[0].getElementById("bx-video-wrapper-"+e),i=o.buildEnvironment(e,bouncex.campaigns[e].video.vpaid,t,n),r=i.ad,s=document.getElementById("bx-video-progress-wrapper-"+e);for(var c in s&&s.parentNode.removeChild(s),i.callbacks)r.unsubscribe(i.callbacks[c],c),r.subscribe(i.callbacks[c],c,i);i.vastConfig.vpaidAdParams&&(i.config.creativeData={AdParameters:i.vastConfig.vpaidAdParams}),(0,a.validateAd)(r)||bouncex.video.log(e,"_validateVPAID Error: VPAID interface check failed","error"),(0,a.adjustCreative)(e),r.initAd(i.vastConfig.vpaidWidth,i.vastConfig.vpaidHeight,i.config.viewMode,i.config.desiredBitrate,i.config.creativeData,i.config.environmentVars)}};t.default=o},2349:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4460));function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw r}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var s={fireTrackingRequests:function(e,t,n){var i,o=bouncex.campaigns[e],c=o.trigger,u=o.video.uniqueEventPixels||[],d=o.video.vpaid.ad,l=s.normalizeURLs(n);if(null!==l&&!bouncex.video.disableTrackingEvents){if(l=s.filterURLs(l),c&&null!=o&&null!==(i=o.video)&&void 0!==i&&null!==(i=i.vpaid)&&void 0!==i&&null!==(i=i.vastConfig)&&void 0!==i&&i.vpaidAdParams){var p,g=new RegExp("".concat(a.default.wkndTriggerPlaceholder),"g"),f=o.video.vpaid.vastConfig.vpaidAdParams.replace(g,c);o.video.vpaid.vastConfig.vpaidAdParams=f,null!=o&&null!==(p=o.video)&&void 0!==p&&null!==(p=p.vpaid)&&void 0!==p&&null!==(p=p.config)&&void 0!==p&&null!==(p=p.creativeData)&&void 0!==p&&p.AdParameters&&(o.video.vpaid.config.creativeData.AdParameters=f)}l=l.map((function(e){return e.replace(a.default.wkndTriggerPlaceholder,c)}));var v,m=r(l);try{for(m.s();!(v=m.n()).done;){var h=v.value;if(!u.includes(h)){u.push(h);var b=h;"true"!==d.allowCacheBusting&&!0!==d.allowCacheBusting||(h.indexOf("?")>-1?b+="&rnd="+Math.random():b+="?rnd="+Math.random()),bouncex.video.log(e,"firing event pixel "+b+" for "+t,"eventpixel"),document.createElement("img").src=b}}}catch(e){m.e(e)}finally{m.f()}}},normalizeURLs:function(e){return e&&0!==e.length?"string"==typeof e?[e]:e:null},filterURLs:function(e){return e.filter((function(e){return!(null===e||e.length<1||-1===e.indexOf("http"))}))}};t.default=s},2358:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={adLoaded:function(e,t){bouncex.campaigns[e].video.status.ready=!0,bouncex.video.playerReady(e)},adStarted:function(e){if(bouncex.campaigns[e].video.videoResponseLoaded){var t=bouncex.campaigns[e].video.triggerType;bouncex.show_ad(t,e)}}};t.default=n},3513:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(9046),r=n(7874),o=i(n(1164)),s=i(n(5754)),c={_affiliateLinkClicked:!1,_affiliateLinksFoundBySelector:{},_pageChangeListenerAdded:!1,_articleData:null,registerAffiliateOnsite:function(e){var t;c._affiliateLinkClicked=!1,c._affiliateLinksFoundBySelector={},c._articleData=null,null!=e&&null!==(t=e.affiliateLinkSelectors)&&void 0!==t&&t.length&&("string"==typeof e.affiliateLinkSelectors&&(e.affiliateLinkSelectors=[e.affiliateLinkSelectors]),e.affiliateLinkSelectors.forEach((function(t){if("string"==typeof t){var n=document.querySelectorAll(t);if(c._affiliateLinksFoundBySelector[t]=n.length,c._affiliateLinksFoundBySelector[t])c._addClickListenersToAffiliateLinks(n),c._addPageChangeListener(),c._articleData=c.getArticleData(e);else{(0,r.waitForNodesInserted)(t,(function(n,i){document.removeEventListener("animationstart",i);var a=document.querySelectorAll(t);c._affiliateLinksFoundBySelector[t]=a.length,c._addClickListenersToAffiliateLinks(a),c._addPageChangeListener(),c._articleData=c.getArticleData(e)}))}}})))},_addPageChangeListener:function(){var e;if(!c._pageChangeListenerAdded){var t=function(){Object.values(c._affiliateLinksFoundBySelector).some((function(e){return e>0}))&&(c._affiliateLinkClicked||c._articleData&&c.pushArticle(c._articleData))};null!==(e=bouncex)&&void 0!==e&&null!==(e=e.website)&&void 0!==e&&e.spa&&bouncex.shouldCheckSpa()?window.addEventListener("spaPageChangeEvent.bx",t):(0,a.addEndPageViewEventListener)(t),c._pageChangeListenerAdded=!0}},_addClickListenersToAffiliateLinks:function(e){e.forEach((function(e){e.addEventListener("click",(function(e){c._affiliateLinkClicked=!0,c.clearArticles()}))}))},getArticleData:function(e){var t=o.default.captureArticle();if(null!=e&&e.titleSelector){var n=document.querySelector(e.titleSelector);null!=n&&n.textContent&&(t.title=n.textContent)}if(null!=e&&e.imageSelector){var i=document.querySelector(e.imageSelector);null!=i&&i.src&&(t.image=i.src)}return t.url||(t.url=window.location.href),t},getAllArticles:function(){var e=c.getStorageKey(),t=window.sessionStorage.getItem(e);return bouncex.parseJSON(t,[])},setArticles:function(e){if(Array.isArray(e)){var t=e.filter((function(e){return"article"===(null==e?void 0:e["@type"])}));t.forEach((function(e){var t;if((null==e||null===(t=e.image)||void 0===t?void 0:t.indexOf("//"))>=0){var n=e.image.split(/\/\/([\s\S]*)/);e.image=n[1]?n[1]:null}}));var n=c.getStorageKey();try{window.sessionStorage.setItem(n,JSON.stringify(t))}catch(e){s.default.error(e)}}},pushArticle:function(e){if("article"===(null==e?void 0:e["@type"])){var t=c.getAllArticles();t.push(e),c.setArticles(t)}},clearArticles:function(){c.setArticles([])},getStorageKey:function(){return"wkndAffiliateArticles"+bouncex.website.id},getLatestArticle:function(){var e=c.getAllArticles();return e.length?e[e.length-1]:{}},hasArticlesStored:function(){return!!c.getAllArticles().length}};t.default=c},3606:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(7424)),r=i(n(8416)),o=i(n(7686)),s=i(n(5754)),c=i(n(1164));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={init:function(){l.sendArticleViewEvent()},sendArticleViewEvent:function(){var e,t=c.default.captureArticle();if(t&&"article"===(null==t?void 0:t.type)){var n={};(n=Object.keys(t).filter((function(e){return!1===["type","@type"].includes(e)})).reduce((function(e,n){return d(d({},e),{},(0,r.default)({},"article:".concat(n),t[n]))}),n))["article:keywords"]=JSON.stringify(null!==(e=n["article:keywords"])&&void 0!==e?e:[]),o.default.report("article_view",n)}},sendItemEventFromArticle:function(){var e,t,n,i=c.default.captureArticle();if(null!==(e=bouncex)&&void 0!==e&&null!==(e=e.website)&&void 0!==e&&e.gbi_enabled||null!==(t=bouncex)&&void 0!==t&&null!==(t=t.website)&&void 0!==t&&t.gbi2Enabled){var a=c.default.convertArticleToProduct(i);if(a){var r=l.applyItemEventOverrides(a);"string"==typeof r["item:lang"]&&-1!==(null===(n=r["item:lang"])||void 0===n?void 0:n.indexOf("en"))?(o.default.report("item",r),o.default.report("view item",{"item:id":r["item:id"]})):s.default.debug({group:"Article Capture",message:"Article lang must be in English. Not sending Item event"})}}},applyItemEventOverrides:function(e){var t=JSON.parse(JSON.stringify(e));return!Object.keys(l.itemEventDataOverrides).length?(s.default.debug({group:"Article Capture",message:"No overrides registered for the Item Event"}),t):(Object.entries(l.itemEventDataOverrides).forEach((function(e){var n=(0,a.default)(e,2),i=n[0],r=n[1];try{t["item:".concat(i)]=r()}catch(e){s.default.warn({group:"Article Capture",message:'Error while trying to override/add prop "'.concat(i,'" to Item Event'),metadata:e})}})),s.default.debug({group:"Article Capture",message:"Modified Item Event with override functions",metadata:{productOverride:t}}),t)},itemEventDataOverrides:{},addItemEventPropOverride:function(e,t){if("string"==typeof e&&"function"==typeof t){var n=e.toLowerCase();l.itemEventDataOverrides[n]=t}}};t.default=l},1200:(e,t,n)=>{var i=n(4836),a=n(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(4687)),o=i(n(8416)),s=i(n(861)),c=i(n(7424)),u=i(n(7156)),d=n(2481),l=i(n(5754)),p=m(n(189)),g=i(n(7989)),f=m(n(6127));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y,_,x,w,P=function(e){l.default.warn({group:"customer registration",message:e})},O=[],I={init:(w=(0,u.default)(r.default.mark((function e(){var t,n,i,a,o,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0,(0,d.hasFeatureFlag)("CUSTOMER_REGISTRATION_ENABLED")?null!==(r=bouncex)&&void 0!==r&&null!==(r=r.website)&&void 0!==r&&r.crs||(P('Failed to init, configuration "bouncex.website.crs" not found.'),0):(P("Failed to init, CUSTOMER_REGISTRATION_ENABLED feature flag not found."),0)){e.next=2;break}return e.abrupt("return");case 2:if(n=null===(t=bouncex)||void 0===t||null===(t=t.website)||void 0===t?void 0:t.crs,i=n.pageCount,g.default.init({interval:null==i?void 0:i.interval,pageTypesToCount:null==i?void 0:i.pageTypes}),bouncex.website.crs.integrations){e.next=7;break}return P('"bouncex.website.crs.integrations" to read FE props not found.'),e.abrupt("return");case 7:return e.prev=7,e.next=10,Promise.allSettled([I.getProfileSegments(),I.getProfileProps()]);case 10:a=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(7),P("Failed to read props or segments ".concat(JSON.stringify(e.t0))),e.abrupt("return");case 17:return o="fulfilled"===a[0].status?a[0].value:{},s="fulfilled"===a[1].status?a[1].value:{},bouncex.updateBounceCookie((function(e){e.cr={l:!!s.login,r:!!s.registration,p:!!s.paidSubs,ly:!!s.loyalty},e.sg=o})),bouncex.reload_campaigns(),bouncex.on(bouncex.window,"bxValidateFormComplete",I.ecapEventHandler),I.sendAnalyticsEvents(s,o),e.next=25,I.sendProfileUpdates(s,!1);case 25:case"end":return e.stop()}var r}),e,null,[[7,13]])}))),function(){return w.apply(this,arguments)}),sendAnalyticsEvents:function(e,t){var n;null!==(n=bouncex)&&void 0!==n&&null!==(n=n.state)&&void 0!==n&&n.newvid&&(I.sendProfileStatusEvent(e,t),I.sendIdSyncEvent(e))},sendProfileStatusEvent:function(e,t){var n=I.getIntegrationsWithFullConfig();Object.entries(n).forEach((function(n){var i=(0,c.default)(n,2),a=i[0],r=i[1],o={status_type:a,status:null!=e&&e[a]?"1":"0",vendor_id:null==e?void 0:e["".concat(r.int,"-profileId")],vendor_name:r.int,tier:null==t?void 0:t[r.int]};bouncex.push(["profile_status",o])}))},sendIdSyncEvent:function(e){Object.entries(e).forEach((function(e){var t,n=(0,c.default)(e,2),i=n[0],a=n[1];if(-1!==i.indexOf("-profileId")){var r=null===(t=i.split("-profileId"))||void 0===t?void 0:t[0],o={external_id:a,id_source:r,id_type:"".concat(r,"_id")};bouncex.push(["id_sync",o])}}))},sendProfileUpdates:(x=(0,u.default)(r.default.mark((function e(t,n){var i,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=I.getIntegrationNames(),a=i.filter((function(e){var t;return(null==f||null===(t=f[e])||void 0===t?void 0:t.shouldSendUpdates)||n})).map((function(e){return p.default.updateUserInfo(e,t)})),e.prev=2,e.next=5,Promise.allSettled(a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),P("Failed to update user status");case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),function(e,t){return x.apply(this,arguments)}),getProfileSegments:(_=(0,u.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.getProfileSegmentsByIntegration(),e.prev=1,e.next=4,Promise.allSettled(t);case 4:return n=e.sent,e.abrupt("return",I.parseFoundProfileSegments(n));case 8:e.prev=8,e.t0=e.catch(1),P("Failed to read the profile segments ".concat(JSON.stringify(e.t0)));case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(){return _.apply(this,arguments)}),getProfileSegmentsByIntegration:function(){var e,t=I.getIntegrationNames().filter((function(e){var t;return!(null==f||null===(t=f[e])||void 0===t||!t.getProfileSegments)})),n=t.map((function(e){return f[e].getProfileSegments()}));return(e=O).push.apply(e,(0,s.default)(t)),n},getIntegrationNames:function(){var e=Object.values(bouncex.website.crs.integrations).filter((function(e){return""!==e.int})).map((function(e){return e.int}));return(0,s.default)(new Set(e))},parseFoundProfileSegments:function(e){var t={};return O.forEach((function(n,i){"fulfilled"===e[i].status&&(t[n]=e[i].value)})),O=[],t},getProfileProps:(y=(0,u.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.getProfilePropsByIntegration(),e.prev=1,e.next=4,Promise.allSettled(t);case 4:return n=e.sent,e.abrupt("return",I.parseFoundProfileProps(n));case 8:e.prev=8,e.t0=e.catch(1),P("Failed to read the profile props ".concat(JSON.stringify(e.t0)));case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(){return y.apply(this,arguments)}),getProfilePropsByIntegration:function(){var e=I.getPropNamesByIntegration(bouncex.website.crs.integrations),t=[];return Object.entries(e).forEach((function(e){var n,i=(0,c.default)(e,2),a=i[0],r=i[1];null!=f&&null!==(n=f[a])&&void 0!==n&&n.getProfileProps&&t.push(f[a].getProfileProps(r,!0,"".concat(a,"-")))})),t},parseFoundProfileProps:function(e){var t=e.reduce((function(e,t){return"fulfilled"===t.status&&e.push(t.value),e}),[]);return I.buildStandardProfileProps(t)},buildStandardProfileProps:function(e){var t=bouncex.website.crs.integrations,n={},i=e.reduce((function(e,t){return b(b({},e),t)}),{});return Object.entries(i).forEach((function(e){var t=(0,c.default)(e,2),i=t[0],a=t[1];i.indexOf("-profileId")>-1&&(n[i]=a)})),Object.entries(t).forEach((function(e){var t,a=(0,c.default)(e,2),r=a[0],o=a[1],s="".concat(o.int,"-").concat(o.prop);void 0!==i[s]&&("email"===r&&bouncex.utils.validate.email(i[s])&&(n.email=i[s]),"email"!==r&&(n[r]=!((null===(t=i[s])||void 0===t?void 0:t.toString())!==o.val)))})),n},getPropNamesByIntegration:function(){var e=I.getIntegrationsWithFullConfig(),t={};return Object.values(e).forEach((function(e){t[e.int]||(t[e.int]=[]),t[e.int].push(e.prop)})),t},getIntegrationsWithFullConfig:function(){var e=bouncex.website.crs.integrations;return Object.entries(e).reduce((function(e,t){var n=(0,c.default)(t,2),i=n[0],a=n[1];return""===a.int||""===a.prop||""===a.val||(e[i]=a),e}),{})},ecapEventHandler:function(e){var t,n,i;if(null!=e&&null!==(t=e.submitData)&&void 0!==t&&t.email){var a,r,o={};if(null!=e&&null!==(n=e.submitData)&&void 0!==n&&n.email)o["email-profileId"]=null==e||null===(a=e.submitData)||void 0===a?void 0:a.email;if(null!=e&&null!==(i=e.submitData)&&void 0!==i&&i.phone_number)o["phone-profileId"]=null==e||null===(r=e.submitData)||void 0===r?void 0:r.phone_number;I.sendProfileUpdates(o,!0),I.visitorSignedUpForLoyalty(null==e?void 0:e.campaign_id)&&(I.sendLoyaltyAnalyticsEvent(null==e?void 0:e.campaign_id),bouncex.updateBounceCookie((function(e){null!=e&&e.cr&&(e.cr.ly=!0)})))}},sendLoyaltyAnalyticsEvent:function(e){var t,n,i=null===(t=bouncex)||void 0===t||null===(t=t.website)||void 0===t||null===(t=t.crs)||void 0===t||null===(t=t.integrations)||void 0===t||null===(t=t.loyalty)||void 0===t?void 0:t.int,a={status_type:"loyalty",status:"1",campaignid:e,status_reason:"submit",vendor_id:p.UserRegistrationIdStorage.getLoyaltyId(),vendor_name:i,tier:null===(n=bouncex)||void 0===n||null===(n=n.cookie)||void 0===n||null===(n=n.sg)||void 0===n?void 0:n[i]};bouncex.push(["profile_status",a])},visitorSignedUpForLoyalty:function(e){var t,n,i=null===(t=bouncex)||void 0===t||null===(t=t.campaigns)||void 0===t?void 0:t[e];return!!i&&("Loyalty"===(null==i?void 0:i.purpose)&&"Loyalty Program"===(null==i?void 0:i.sub_purpose)&&(!!I.getIntegrationsWithFullConfig().loyalty&&!(null!==(n=bouncex)&&void 0!==n&&null!==(n=n.cookie)&&void 0!==n&&null!==(n=n.cr)&&void 0!==n&&n.ly)))}};t.default=I},2437:(e,t)=>{function n(){this["@type"]="article",this.type=null,this.title=null,this.url=null,this.image=null,this.pubdate=null,this.description=null,this.author=null,this.keywords=null,this.section=null,this.breadcrumbs=null,this.wordCount=null,this.language=null,this.lastmod=null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype.properties=["type","title","url","image","pubdate","lastmod","description","author","keywords","section","breadcrumbs","wordCount","language"]},9491:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function e(t){var n=document.querySelector('head meta[name="'.concat(t,'"]'));if(n)return n.getAttribute("content");switch(t){case"language":return document.documentElement.getAttribute("lang");case"pubdate":return e("dateCreated");case"lastmod":return e("dateModified")}return null},i={populate:function(e){e.properties.forEach((function(t){e[t]=e[t]||n(t)})),"string"==typeof e.keywords&&(e.keywords=e.keywords.split(","))}};t.default=i},1023:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(9576)),r=i(n(9491)),o=i(n(6358));t.default={JSONLD:o.default,OpenGraph:a.default,GeneralMetadata:r.default}},6358:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={populate:function(e){var t=document.querySelectorAll('head script[type="application/ld+json"]'),n=[];t.forEach((function(e){var t=JSON.parse(e.innerHTML),i=t["@graph"];i&&Array.isArray(i)?i.forEach((function(e){n.push(e)})):t&&Array.isArray(t)?t.forEach((function(e){n.push(e)})):t&&n.push(t)})),n.forEach((function(t){i(e,t)}))}},i=function(e,t){var n=t["@type"],i=e["@type"];if(n&&(n=n.charAt(0).toLowerCase()+n.slice(1),"article"===i))return"function"==typeof a[n]?a[n](e,t):void 0},a={breadcrumbList:function(e,t){if(Array.isArray(t.itemListElement)){var n=[];t.itemListElement.forEach((function(e){var t=e.item;t&&t.name&&n.push(t.name)})),e.breadcrumbs=e.breadcrumbs||n}},imageObject:function(e,t){t.url&&(e.image=e.image||t.url)},webPage:function(e,t){if(e.title=e.title||t.headline||t.name,e.description=e.description||t.description,e.pubdate=e.pubdate||t.datePublished,e.lastmod=e.lastmod||t.dateModified,e.wordCount=e.wordCount||t.wordCount,e.section=e.section||t.articleSection,t.keywords&&Array.isArray(t.keywords)&&(e.keywords=e.keywords||t.keywords),t.author&&Array.isArray(t.author)){var n=[];t.author.forEach((function(e){e&&e.name&&n.push(e.name)})),n.length>0&&(e.author=e.author||n.join(","))}t.image&&"ImageObject"===t.image["@type"]&&a.imageObject(e,t.image)}};a.blogPosting=a.webPage,a.newsArticle=a.webPage,a.article=a.webPage;t.default=n},9576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function e(t){var n=document.querySelector('\n    head meta[name="og:'.concat(t,'"],\n    head meta[property="og:').concat(t,'"],\n    head meta[property="article:').concat(t,'"]\n  '));if(n)return n.getAttribute("content");switch(t){case"lastmod":return e("modified_time");case"pubdate":return e("published_time")}return null},i={populate:function(e){e.properties.forEach((function(t){e[t]=e[t]||n(t)}))}};t.default=i},1164:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(1023)),r=i(n(2437)),o=i(n(5754)),s=n(2481),c={isValidURL:function(e){try{return new URL(e),!0}catch(e){return!1}},unsetAuthorIfValidURL:function(e){c.isValidURL(e.author)&&(e.author=null)},captureArticle:function(){var e=new r.default;return c.capture(e),e.language=e.language||"en",e},capture:function(e){Object.values(a.default).forEach((function(t){try{t.populate(e),c.unsetAuthorIfValidURL(e)}catch(e){o.default.error(e)}})),c.sanitizeObject(e)},sanitizeObject:function(e){e.properties.forEach((function(t){"string"==typeof e[t]&&(e[t]=e[t].trim()),Array.isArray(e[t])&&(e[t]=e[t].map((function(e){return"string"==typeof e?e.trim():e}))),null!==e[t]&&void 0!==e[t]&&""!==e[t]||delete e[t]}))},convertArticleToProduct:function(e){var t={"item:id":e.url,"item:copy":e.title,"item:url":e.url,"item:imageurl":e.image,"item:instock":!0,"item:type":"article","item:lang":e.language||"en","item:description":e.description};if(bouncex&&bouncex.pubs&&"function"==typeof bouncex.pubs.convertArticleURLToItemID)t["item:id"]=bouncex.pubs.convertArticleURLToItemID(t["item:id"]);else try{var n=new URL(e.url).pathname;n=(n=n.replace(/(\/index)?\.html$/,"")).replace(/^\//,""),t["item:id"]=n}catch(e){bouncex.err(e)}try{var i=new Date(e.pubdate);t["item:date"]=i.toISOString().substring(0,10)}catch(e){t["item:date"]=new Date(Date.now()).toISOString().substring(0,10)}try{var a=new Date(e.lastmod||e.pubdate);t["item:modify_date"]=a.toISOString().substring(0,10)}catch(e){t["item:modify_date"]=new Date(Date.now()).toISOString().substring(0,10)}t["item:category"]=e.section,t["item:category"]||Array.isArray(e.breadcrumbs)&&e.breadcrumbs.length>0&&(t["item:category"]=e.breadcrumbs[e.breadcrumbs.length-1]);var r=[],c=Object.keys(t).reduce((function(e,n){return t[n]||r.push(n),e&&!!t[n]}),!0);return o.default.debug({group:"Article Capture",message:"Article and Item events",metadata:{allFieldsAreFilledIn:c,missingFields:r,article:e,product:t}}),c&&(0,s.hasFeatureFlag)("NEWSLETTER_IN_A_BOX")?t:null}};t.default=c},2233:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(3513)),r=i(n(3606)),o=i(n(1200)),s={init:function(){r.default.init(),o.default.init()},affiliateOnsite:a.default,articleCapture:{addItemEventPropOverride:r.default.addItemEventPropOverride,sendItemEventFromArticle:r.default.sendItemEventFromArticle}};t.default=s},7989:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(8698)),r=i(n(5754)),o=function(e,t,n){return{count:0,expiration:d.getIntervalEndDate(e,t,n),pagesVisited:{}}},s=function(e){var t=new Date(e);return new Date>t},c=function(e){r.default.warn({group:u,message:e})},u="page counter",d={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.interval,n=void 0===t?0:t,i=e.intervalUnit,a=void 0===i?"days":i,c=e.intervalStart,l=void 0===c?"":c,p=e.pageTypesToCount,g=void 0===p?[]:p,f=e.countEachVisit,v=void 0!==f&&f,m=Number(n);if(!d.canInit(m,a))return!1;if(-1===g.indexOf(bouncex.website.pts))return r.default.info({group:u,message:'Curent page type: "'.concat(bouncex.website.pts,'" should not be counted.')}),!1;var h=d.getFromCookie()||o(m,a,l),b=window.location.pathname,y=h.pagesVisited[b];return!(!v&&y)&&(s(h.expiration)&&(h=o(m,a,l)),d.updateCount(h,b),bouncex.updateBounceCookie((function(e){e.pc={c:h.count,e:h.expiration,p:h.pagesVisited}})),!0)},hasValidDataFromCookie:function(e){if(!e)return c("Cookie data not found."),!1;var t=e.c,n=e.e,i=e.p;return void 0===t||void 0===n||void 0===i?(c("Missing data in cookie."),!1):"number"!=typeof t||t<0?(c("Counter in cookie is not numeric or less than 0."),!1):"number"!=typeof n||e.e<0?(c("Expiration in cookie is not numeric or less than 0."),!1):"object"===(0,a.default)(e.p)||(c("Pages visited in cookie is not an object."),!1)},getFromCookie:function(){var e,t,n=null===(e=(t=bouncex).getBounceCookie)||void 0===e||null===(e=e.call(t))||void 0===e?void 0:e.pc;return d.hasValidDataFromCookie(n)?{count:n.c,expiration:n.e,pagesVisited:n.p}:null},updateCount:function(e,t){e.pagesVisited[t]?e.pagesVisited[t]++:e.pagesVisited[t]=1,e.count++},canInit:function(e,t){return bouncex.website.pt&&Object.keys(bouncex.website.pt).length?isNaN(e)?(c('Failed to init, "interval" is not a number.'),!1):e<0?(c('Failed to init, "interval" can not be negative.'),!1):-1!==["hours","days","months","years"].indexOf(t)||(c('Failed to init, "'.concat(t,'" is not a supported intervalUnit.')),!1):(c("Failed to init, PageTypes not found."),!1)},getIntervalStartDate:function(e){var t=new Date;return"start of month"===e?new Date(t.getFullYear(),t.getMonth(),1):"start of year"===e?new Date(t.getFullYear(),0,1):t},getIntervalEndDate:function(e,t,n){var i=Number(e),a=d.getIntervalStartDate(n),r="years"===t?a.getFullYear()+i:a.getFullYear(),o="months"===t?a.getMonth()+i:a.getMonth(),s="days"===t?a.getDate()+i:a.getDate(),c="hours"===t?a.getHours()+i:a.getHours(),u="hours"===t?a.getMinutes():0;return new Date(r,o,s,c,u).getTime()}};t.default=d},134:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(9974)),r=i(n(5754)),o={_articles:[],_constants:{selectors:{group:".bx-group-custom",image:".bx-row-line",headline:".bx-row-text-subheadline"}},_getArticles:function(){return this._articles},_getRequestOptions:function(){var e=this;return{url:e._settings.feedUrl,dataType:e._settings.feedFormat,complete:function(t,n){e._handleResponse(t,n)}}},_getStorageKey:function(){return"bx-recirc-"+bouncex.website.id},_getStoredArticles:function(){var e=this._getStorageKey(),t=window.sessionStorage.getItem(e);return bouncex.parseJSON(t,[])},_getValidArticles:function(e){for(var t=[],n=0;n<e.length;n++)this._isValidArticle(e[n])&&t.push(e[n]);return t},_getValidGroups:function(e){for(var t=e.querySelectorAll(this._constants.selectors.group),n=[],i=0;i<t.length;i++)this._isValidGroup(t[i])&&n.push(t[i]);return n},_handleResponse:function(e,t){if("error"===t)return this.error(null,"error response from article feed");this.log(null,"parsing feed response");var n=this._parseArticles(e);if(!n)return this.error(null,"no articles found while parsing feed response");var i=this._getValidArticles(n);if(!i.length)return this.error(null,"all articles failed validation");this.log(null,i.length+"/"+n.length+" articles passed validation"),this._setArticles(i),this._storeArticles(i)},_isValidGroup:function(e){var t=1===e.querySelectorAll(this._constants.selectors.image).length,n=1===e.querySelectorAll(this._constants.selectors.headline).length,i=1===e.querySelectorAll("a").length;return t&&n&&i},_requestFeed:function(e){this.log(null,"requesting articles from "+e.url),a.default.request(e)},_setArticles:function(e){this._articles=e},_storeArticles:function(e){this.log(null,"storing articles in session storage");var t=this._getStorageKey();try{window.sessionStorage.setItem(t,JSON.stringify(e))}catch(e){this.error(null,e)}},_isValidArticle:function(e){if(!e)return!1;var t=!(!e.link||!bouncex.utils.validate.url(e.link)),n=!(!e.image||!bouncex.utils.validate.url(e.image)),i=!!e.headline;return t&&n&&i},_parseArticles:function(e){switch(this._settings.feedFormat){case"xml":return this._settings.responseParser(e.responseXML);case"json":return this._settings.responseParser(e.responseJSON);default:return this.error(null,"unrecognized feed format type"),!1}},_populateGroup:function(e,t,n){try{var i=t.querySelectorAll(this._constants.selectors.image)[0].firstChild,a=t.querySelectorAll(this._constants.selectors.headline)[0].firstChild,r=t.querySelector("a");i.style.backgroundImage="url("+n.image+")",i.style.backgroundSize="cover",a.textContent=n.headline,r.setAttribute("href",n.link)}catch(t){this.error(e,t)}},_settings:{},_validateSettings:function(){return!!(this._settings.feedFormat&&this._settings.feedUrl&&this._settings.responseParser&&"function"==typeof this._settings.responseParser)},addSettings:function(e){for(var t in e)bouncex.recirc._settings[t]=e[t]},articlesAvailable:function(){return this._articles.length>0},error:function(e,t){this.log(e,t,!0)},init:function(){if(this.isEnabled()&&!this.articlesAvailable()){if(!this._validateSettings())return this.log(null,"settings failed validation");var e=this._getStoredArticles();e&&e.length?(this.log(null,"retrieving articles from session storage"),this._setArticles(e)):(this.log(null,"no articles found in storage; requesting from feed"),this._requestFeed(this._getRequestOptions()))}},isEnabled:function(){return!!this._settings.enabled},log:function(e,t,n){var i={group:"recirc",campaignId:e,message:t};n?r.default.error(i):r.default.info(i)},populateCreative:function(e){if(!this.isEnabled())return!1;if(!this.articlesAvailable())return!1;var t=document.getElementById("bx-campaign-"+e);if(!t)return this.error(e,"no creative found");var n=this._getValidGroups(t),i=this._getArticles();if(n.length&&n.length<=i.length){this.log(e,"populating article groups");for(var a=0;a<n.length;a++)this._populateGroup(e,n[a],i[a])}else n.length&&this.log(e,"not enough articles to populate creative")}};t.default=o},4675:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(5754)),r={setHighEntropyValues:function(){var e;if(null===(e=navigator)||void 0===e||!e.userAgentData)return a.default.info({message:"Client Hints (i.e. userAgentData) not supported",group:"clientHints"}),!1;navigator.userAgentData.getHighEntropyValues(["architecture","bitness","model","fullVersionList","platformVersion"]).then((function(e){r.setDeviceSua(e)})).catch((function(e){a.default.error({message:"Error retrieving client hints ".concat(e),group:"Ads init"})}))},setDeviceSua:function(e){var t=e.fullVersionList.map((function(e){return{brand:e.brand,version:e.version.split(".")}})),n={brand:e.platform,version:e.platformVersion.split(".")};bouncex.state.deviceSua={browsers:t,platform:n,mobile:e.mobile?1:0,architecture:e.architecture,bitness:e.bitness,model:e.model,source:2}}};t.default=r},1522:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,o=i(n(4687)),s=i(n(7156)),c=i(n(5754)),u={shouldSendUpdates:!1,isLoaded:function(){return new Promise((function(e){void 0!==window.blueConicClient&&void 0!==window.blueConicClient.event&&void 0!==window.blueConicClient.event.subscribe?e(!0):window.addEventListener("onBlueConicLoaded",(function(){e(!0)}),!1)}))},getProfileProps:(r=(0,s.default)(o.default.mark((function e(){var t,n,i,a,r,s=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:[],n=s.length>1&&void 0!==s[1]&&s[1],i=s.length>2&&void 0!==s[2]?s[2]:"",a={},e.prev=4,e.next=7,u.isLoaded();case 7:if(!(r=window.blueConicClient.profile.getProfile())){e.next=13;break}if(n&&(a["".concat(i,"profileId")]=r.getId()),Array.isArray(t)){e.next=12;break}return e.abrupt("return",a);case 12:t.forEach((function(e){a["".concat(i).concat(e)]=r.getValue(e)}));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),c.default.error({group:"blueconic",message:"Failed to read blueconic profile props",metadata:{error:"".concat(e.t0)}});case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,null,[[4,15]])}))),function(){return r.apply(this,arguments)}),getProfileSegments:(a=(0,s.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,u.isLoaded();case 4:window.blueConicClient.getSegments().forEach((function(e){null!=e&&e.name&&"string"==typeof e.name&&e.name.toLowerCase().indexOf("wknd")>-1&&t.push(e.name)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c.default.warn({group:"blueconic",message:"Failed to read blueconic profile segments",metadata:{error:"".concat(e.t0)}});case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(){return a.apply(this,arguments)})};t.default=u},6127:(e,t,n)=>{var i=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"blueconic",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"loyaltyplus",{enumerable:!0,get:function(){return r.default}});var a=i(n(1522)),r=i(n(6073))},6073:(e,t,n)=>{var i=n(4836),a=n(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(4687)),o=i(n(7156)),s=i(n(5754)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n(189));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d,l,p,g="loyaltyplus",f=function(e){var t,n,i=null;null!=e&&null!==(t=e.ids)&&void 0!==t&&t.length&&(i=null===(n=e.ids.find((function(e){return e.type===g})))||void 0===n?void 0:n.id);return i},v={shouldSendUpdates:!1,isLoaded:(p=(0,o.default)(r.default.mark((function e(){var t,n,i,a,o,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.default.getCachedDataByVendor(g),!Object.keys(t).length){e.next=4;break}return s.default.info({group:"Loyaltyplus",message:"Profile found in session storage cache, no fetch required."}),e.abrupt("return",!0);case 4:return n=c.UserRegistrationIdStorage.getIdByVendor(g),i={},n&&(i.loyaltyplus=n),i.sync=!0,e.prev=8,e.next=11,c.default.getUserInfo(g,i);case 11:if(200===(a=e.sent).status){e.next=16;break}return c.default.setCachedDataByVendor(g,{}),s.default.warn({group:"Loyaltyplus",message:"Failed to fetch Loyaltyplus data from backend"}),e.abrupt("return",!1);case 16:return e.next=18,a.json();case 18:return o=e.sent,u=o.data,c.default.setCachedDataByVendor(g,u),r=void 0,(r=f(u))&&c.UserRegistrationIdStorage.setIdByVendor(g,r),e.abrupt("return",!0);case 25:return e.prev=25,e.t0=e.catch(8),c.default.setCachedDataByVendor(g,{}),s.default.error({group:"Loyaltyplus",message:"Failed to fetch or parse Loyaltyplus data from backend",metadata:{error:null===e.t0||void 0===e.t0?void 0:e.t0.message}}),e.abrupt("return",!1);case 30:case"end":return e.stop()}var r}),e,null,[[8,25]])}))),function(){return p.apply(this,arguments)}),getProfileProps:(l=(0,o.default)(r.default.mark((function e(){var t,n,i,a,o,u,d=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:[],n=d.length>1&&void 0!==d[1]&&d[1],i=d.length>2&&void 0!==d[2]?d[2]:"",a={},e.prev=4,e.next=7,v.isLoaded();case 7:if(o=c.default.getCachedDataByVendor(g),!Object.keys(o).length){e.next=14;break}if(n&&(u=f(o),a["".concat(i,"profileId")]=u),Array.isArray(t)){e.next=12;break}return e.abrupt("return",a);case 12:t.forEach((function(e){a["".concat(i).concat(e)]=(null==o?void 0:o[e])||null})),a["".concat(i,"profile_found")]=!0;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),s.default.warn({group:"Loyaltyplus",message:"Failed to read Loyaltyplus profile props",metadata:{error:"".concat(e.t0)}});case 19:return e.abrupt("return",a);case 20:case"end":return e.stop()}}),e,null,[[4,16]])}))),function(){return l.apply(this,arguments)}),getProfileSegments:(d=(0,o.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,v.isLoaded();case 4:null!=(n=c.default.getCachedDataByVendor(g))&&n.current_tier&&t.push(n.current_tier),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s.default.warn({group:"Loyaltyplus",message:"Failed to read Loyaltyplus profile segments",metadata:{error:"".concat(e.t0)}});case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(){return d.apply(this,arguments)})};t.default=v},5295:(e,t)=>{function n(){return a(navigator.language)}function i(){var e;return a(null===(e=document.documentElement)||void 0===e?void 0:e.lang)}function a(e){return e?e.length<=2?e:e.substring(0,2):""}Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceLanguage=n,t.getDeviceOrDocumentLanguage=function(){var e=n();return e||i()},t.getDocumentLanguage=i}},e=>{e.O(0,[179],(()=>{return t=7975,e(e.s=t);var t}));e.O()}]);