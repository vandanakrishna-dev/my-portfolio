var flexImages=function e(t){if(document.querySelector){var r={selector:0,container:".item",object:"img",rowHeight:180,maxRows:0,truncate:0};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);for(var a="object"==typeof r.selector?[r.selector]:document.querySelectorAll(r.selector),n=0;n<a.length;n++){var l=a[n],o=l.querySelectorAll(r.container),s=[],g=new Date().getTime();if(o.length){var f=window.getComputedStyle?getComputedStyle(o[0],null):o[0].currentStyle;r.margin=(parseInt(f.marginLeft)||0)+(parseInt(f.marginRight)||0)+(Math.round(parseFloat(f.borderLeftWidth))||0)+(Math.round(parseFloat(f.borderRightWidth))||0);for(var c=0;c<o.length;c++){var d=o[c],m=parseInt(d.getAttribute("data-w")),u=m*(r.rowHeight/parseInt(d.getAttribute("data-h"))),h=d.querySelector(r.object);s.push([d,m,u,h,h.getAttribute("data-src")])}x(l,s,r);var v=function(){x(l,s,r)};document.addEventListener?(window["flexImages_listener"+g]=v,window.removeEventListener("resize",window["flexImages_listener"+l.getAttribute("data-flex-t")]),delete window["flexImages_listener"+l.getAttribute("data-flex-t")],window.addEventListener("resize",window["flexImages_listener"+g])):l.onresize=v,l.setAttribute("data-flex-t",g)}}}function x(e,t,r,i){var a,n,l,o,s=1,g=1,f=e.clientWidth-2,c=[],d=0,m=r.rowHeight;function u(e){r.maxRows&&g>r.maxRows||r.truncate&&e&&g>1?c[a][0].style.display="none":(c[a][4]&&(c[a][3].setAttribute("src",c[a][4]),c[a][4]=""),c[a][0].style.width=n+"px",c[a][0].style.height=m+"px",c[a][0].style.display="block")}for(var h=0;h<t.length;h++)if(c.push(t[h]),(d+=t[h][2]+r.margin)>=f){var v=c.length*r.margin;for(s=(f-v)/(d-v),m=Math.ceil(r.rowHeight*s),l=0,a=0;a<c.length;a++)(l+=(n=Math.ceil(c[a][2]*s))+r.margin)>f&&(n-=l-f),u();c=[],d=0,g++}for(a=0;a<c.length;a++)n=Math.floor(c[a][2]*s),o=Math.floor(r.rowHeight*s),u(!0);i||f==e.clientWidth||x(e,t,r,!0),"undefined"!=typeof url_search&&($(".view-more").remove(),$(r.selector+" div:visible:last").append('<a class="view-more" target="_blank" href="'+url_search+'">+ View more</a>'))}};"function"==typeof define&&define.amd?define("flexImages",function(){return flexImages}):"undefined"!=typeof module&&module.exports?module.exports=flexImages:window.flexImages=flexImages;